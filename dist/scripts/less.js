!function(window,undefined){function require(arg){return window.less[arg.split("/")[1]]}function log(str,level){"undefined"!=typeof console&&less.logLevel>=level&&console.log("less: "+str)}function extractId(href){return href.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function errorConsole(e,rootHref){var template="{line} {content}",filename=e.filename||rootHref,errors=[],content=(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+" in "+filename+" ",errorline=function(e,i,classname){e.extract[i]!==undefined&&errors.push(template.replace(/\{line\}/,(parseInt(e.line,10)||0)+(i-1)).replace(/\{class\}/,classname).replace(/\{content\}/,e.extract[i]))};e.extract?(errorline(e,0,""),errorline(e,1,"line"),errorline(e,2,""),content+="on line "+e.line+", column "+(e.column+1)+":\n"+errors.join("\n")):e.stack&&(content+=e.stack),log(content,logLevel.errors)}function createCSS(styles,sheet,lastModified){var href=sheet.href||"",id="less:"+(sheet.title||extractId(href)),oldCss=document.getElementById(id),keepOldCss=!1,css=document.createElement("style");css.setAttribute("type","text/css"),sheet.media&&css.setAttribute("media",sheet.media),css.id=id,css.styleSheet||(css.appendChild(document.createTextNode(styles)),keepOldCss=null!==oldCss&&oldCss.childNodes.length>0&&css.childNodes.length>0&&oldCss.firstChild.nodeValue===css.firstChild.nodeValue);var head=document.getElementsByTagName("head")[0];if(null===oldCss||keepOldCss===!1){var nextEl=sheet&&sheet.nextSibling||null;nextEl?nextEl.parentNode.insertBefore(css,nextEl):head.appendChild(css)}if(oldCss&&keepOldCss===!1&&oldCss.parentNode.removeChild(oldCss),css.styleSheet)try{css.styleSheet.cssText=styles}catch(e){throw new Error("Couldn't reassign styleSheet.cssText.")}if(lastModified&&cache){log("saving "+href+" to cache.",logLevel.info);try{cache.setItem(href,styles),cache.setItem(href+":timestamp",lastModified)}catch(e){log("failed to save",logLevel.errors)}}}function postProcessCSS(styles){return less.postProcessor&&"function"==typeof less.postProcessor&&(styles=less.postProcessor.call(styles,styles)||styles),styles}function errorHTML(e,rootHref){var timer,content,id="less-error-message:"+extractId(rootHref||""),template='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',elem=document.createElement("div"),errors=[],filename=e.filename||rootHref,filenameNoPath=filename.match(/([^\/]+(\?.*)?)$/)[1];elem.id=id,elem.className="less-error-message",content="<h3>"+(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+'</h3><p>in <a href="'+filename+'">'+filenameNoPath+"</a> ";var errorline=function(e,i,classname){e.extract[i]!==undefined&&errors.push(template.replace(/\{line\}/,(parseInt(e.line,10)||0)+(i-1)).replace(/\{class\}/,classname).replace(/\{content\}/,e.extract[i]))};e.extract?(errorline(e,0,""),errorline(e,1,"line"),errorline(e,2,""),content+="on line "+e.line+", column "+(e.column+1)+":</p><ul>"+errors.join("")+"</ul>"):e.stack&&(content+="<br/>"+e.stack.split("\n").slice(1).join("<br/>")),elem.innerHTML=content,createCSS([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),elem.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"==less.env&&(timer=setInterval(function(){document.body&&(document.getElementById(id)?document.body.replaceChild(elem,document.getElementById(id)):document.body.insertBefore(elem,document.body.firstChild),clearInterval(timer))},10))}function error(e,rootHref){less.errorReporting&&"html"!==less.errorReporting?"console"===less.errorReporting?errorConsole(e,rootHref):"function"==typeof less.errorReporting&&less.errorReporting("add",e,rootHref):errorHTML(e,rootHref)}function removeErrorHTML(path){var node=document.getElementById("less-error-message:"+extractId(path));node&&node.parentNode.removeChild(node)}function removeErrorConsole(){}function removeError(path){less.errorReporting&&"html"!==less.errorReporting?"console"===less.errorReporting?removeErrorConsole(path):"function"==typeof less.errorReporting&&less.errorReporting("remove",path):removeErrorHTML(path)}function loadStyles(modifyVars){for(var style,styles=document.getElementsByTagName("style"),i=0;i<styles.length;i++)if(style=styles[i],style.type.match(typePattern)){var env=new less.tree.parseEnv(less),lessText=style.innerHTML||"";env.filename=document.location.href.replace(/#.*$/,""),(modifyVars||less.globalVars)&&(env.useFileCache=!0);var callback=function(style){return function(e,cssAST){if(e)return error(e,"inline");var css=cssAST.toCSS(less);style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.innerHTML=css}}(style);new less.Parser(env).parse(lessText,callback,{globalVars:less.globalVars,modifyVars:modifyVars})}}function extractUrlParts(url,baseUrl){var i,baseUrlParts,urlPartsRegex=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,urlParts=url.match(urlPartsRegex),returner={},directories=[];if(!urlParts)throw new Error("Could not parse sheet href - '"+url+"'");if(!urlParts[1]||urlParts[2]){if(baseUrlParts=baseUrl.match(urlPartsRegex),!baseUrlParts)throw new Error("Could not parse page url - '"+baseUrl+"'");urlParts[1]=urlParts[1]||baseUrlParts[1]||"",urlParts[2]||(urlParts[3]=baseUrlParts[3]+urlParts[3])}if(urlParts[3]){for(directories=urlParts[3].replace(/\\/g,"/").split("/"),i=0;i<directories.length;i++)"."===directories[i]&&(directories.splice(i,1),i-=1);for(i=0;i<directories.length;i++)".."===directories[i]&&i>0&&(directories.splice(i-1,2),i-=2)}return returner.hostPart=urlParts[1],returner.directories=directories,returner.path=urlParts[1]+directories.join("/"),returner.fileUrl=returner.path+(urlParts[4]||""),returner.url=returner.fileUrl+(urlParts[5]||""),returner}function pathDiff(url,baseUrl){var i,max,urlDirectories,baseUrlDirectories,urlParts=extractUrlParts(url),baseUrlParts=extractUrlParts(baseUrl),diff="";if(urlParts.hostPart!==baseUrlParts.hostPart)return"";for(max=Math.max(baseUrlParts.directories.length,urlParts.directories.length),i=0;max>i&&baseUrlParts.directories[i]===urlParts.directories[i];i++);for(baseUrlDirectories=baseUrlParts.directories.slice(i),urlDirectories=urlParts.directories.slice(i),i=0;i<baseUrlDirectories.length-1;i++)diff+="../";for(i=0;i<urlDirectories.length-1;i++)diff+=urlDirectories[i]+"/";return diff}function getXMLHttpRequest(){if(window.XMLHttpRequest&&!("file:"===window.location.protocol&&"ActiveXObject"in window))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return log("browser doesn't support AJAX.",logLevel.errors),null}}function doXHR(url,type,callback,errback){function handleResponse(xhr,callback,errback){xhr.status>=200&&xhr.status<300?callback(xhr.responseText,xhr.getResponseHeader("Last-Modified")):"function"==typeof errback&&errback(xhr.status,url)}var xhr=getXMLHttpRequest(),async=isFileProtocol?less.fileAsync:less.async;"function"==typeof xhr.overrideMimeType&&xhr.overrideMimeType("text/css"),log("XHR: Getting '"+url+"'",logLevel.debug),xhr.open("GET",url,async),xhr.setRequestHeader("Accept",type||"text/x-less, text/css; q=0.9, */*; q=0.5"),xhr.send(null),isFileProtocol&&!less.fileAsync?0===xhr.status||xhr.status>=200&&xhr.status<300?callback(xhr.responseText):errback(xhr.status,url):async?xhr.onreadystatechange=function(){4==xhr.readyState&&handleResponse(xhr,callback,errback)}:handleResponse(xhr,callback,errback)}function loadFile(originalHref,currentFileInfo,callback,env){currentFileInfo&&currentFileInfo.currentDirectory&&!/^([A-Za-z-]+:)?\//.test(originalHref)&&(originalHref=currentFileInfo.currentDirectory+originalHref);var hrefParts=extractUrlParts(originalHref,window.location.href),href=hrefParts.url,newFileInfo={currentDirectory:hrefParts.path,filename:href};if(currentFileInfo?(newFileInfo.entryPath=currentFileInfo.entryPath,newFileInfo.rootpath=currentFileInfo.rootpath,newFileInfo.rootFilename=currentFileInfo.rootFilename,newFileInfo.relativeUrls=currentFileInfo.relativeUrls):(newFileInfo.entryPath=hrefParts.path,newFileInfo.rootpath=less.rootpath||hrefParts.path,newFileInfo.rootFilename=href,newFileInfo.relativeUrls=env.relativeUrls),newFileInfo.relativeUrls&&(newFileInfo.rootpath=env.rootpath?extractUrlParts(env.rootpath+pathDiff(hrefParts.path,newFileInfo.entryPath)).path:hrefParts.path),env.useFileCache&&fileCache[href])try{var lessText=fileCache[href];callback(null,lessText,href,newFileInfo,{lastModified:new Date})}catch(e){callback(e,null,href)}else doXHR(href,env.mime,function(data,lastModified){fileCache[href]=data;try{callback(null,data,href,newFileInfo,{lastModified:lastModified})}catch(e){callback(e,null,href)}},function(status,url){callback({type:"File",message:"'"+url+"' wasn't found ("+status+")"},null,href)})}function loadStyleSheet(sheet,callback,reload,remaining,modifyVars){var env=new less.tree.parseEnv(less);env.mime=sheet.type,(modifyVars||less.globalVars)&&(env.useFileCache=!0),loadFile(sheet.href,null,function(e,data,path,newFileInfo,webInfo){if(webInfo){webInfo.remaining=remaining;var css=cache&&cache.getItem(path),timestamp=cache&&cache.getItem(path+":timestamp");if(!reload&&timestamp&&webInfo.lastModified&&new Date(webInfo.lastModified).valueOf()===new Date(timestamp).valueOf())return createCSS(css,sheet),webInfo.local=!0,void callback(null,null,data,sheet,webInfo,path)}removeError(path),data?(env.currentFileInfo=newFileInfo,new less.Parser(env).parse(data,function(e,root){if(e)return callback(e,null,null,sheet);try{callback(e,root,data,sheet,webInfo,path)}catch(e){callback(e,null,null,sheet)}},{modifyVars:modifyVars,globalVars:less.globalVars})):callback(e,null,null,sheet,webInfo,path)},env,modifyVars)}function loadStyleSheets(callback,reload,modifyVars){for(var i=0;i<less.sheets.length;i++)loadStyleSheet(less.sheets[i],callback,reload,less.sheets.length-(i+1),modifyVars)}function initRunningMode(){"development"===less.env?(less.optimization=0,less.watchTimer=setInterval(function(){less.watchMode&&loadStyleSheets(function(e,root,_,sheet,env){if(e)error(e,sheet.href);else if(root){var styles=root.toCSS(less);styles=postProcessCSS(styles),createCSS(styles,sheet,env.lastModified)}})},less.poll)):less.optimization=3}("undefined"==typeof window.less||"undefined"!=typeof window.less.nodeType)&&(window.less={}),less=window.less,tree=window.less.tree={},less.mode="browser";var less,tree;less===undefined&&(less=exports,tree=require("./tree"),less.mode="node"),less.Parser=function(env){function save(){currentPos=i,saveStack.push({current:current,i:i,j:j})}function restore(){var state=saveStack.pop();current=state.current,currentPos=i=state.i,j=state.j}function forget(){saveStack.pop()}function sync(){i>currentPos&&(current=current.slice(i-currentPos),currentPos=i)}function isWhitespace(str,pos){var code=str.charCodeAt(0|pos);return 32>=code&&(32===code||10===code||9===code)}function $(tok){var match,length,tokType=typeof tok;return"string"===tokType?input.charAt(i)!==tok?null:(skipWhitespace(1),tok):(sync(),(match=tok.exec(current))?(length=match[0].length,skipWhitespace(length),"string"==typeof match?match:1===match.length?match[0]:match):null)}function $re(tok){i>currentPos&&(current=current.slice(i-currentPos),currentPos=i);var m=tok.exec(current);return m?(skipWhitespace(m[0].length),"string"==typeof m?m:1===m.length?m[0]:m):null}function $char(tok){return input.charAt(i)!==tok?null:(skipWhitespace(1),tok)}function skipWhitespace(length){for(var c,oldi=i,oldj=j,curr=i-currentPos,endIndex=i+current.length-curr,mem=i+=length,inp=input;endIndex>i&&(c=inp.charCodeAt(i),!(c>32))&&(32===c||10===c||9===c||13===c);i++);return current=current.slice(length+i-mem+curr),currentPos=i,!current.length&&j<chunks.length-1?(current=chunks[++j],skipWhitespace(0),!0):oldi!==i||oldj!==j}function expect(arg,msg){var result="[object Function]"===Object.prototype.toString.call(arg)?arg.call(parsers):$(arg);return result?result:void error(msg||("string"==typeof arg?"expected '"+arg+"' got '"+input.charAt(i)+"'":"unexpected token"))}function expectChar(arg,msg){return input.charAt(i)===arg?(skipWhitespace(1),arg):void error(msg||"expected '"+arg+"' got '"+input.charAt(i)+"'")}function error(msg,type){var e=new Error(msg);throw e.index=i,e.type=type||"Syntax",e}function peek(tok){return"string"==typeof tok?input.charAt(i)===tok:tok.test(current)}function peekChar(tok){return input.charAt(i)===tok}function getInput(e,env){return e.filename&&env.currentFileInfo.filename&&e.filename!==env.currentFileInfo.filename?parser.imports.contents[e.filename]:input}function getLocation(index,inputStream){for(var n=index+1,line=null,column=-1;--n>=0&&"\n"!==inputStream.charAt(n);)column++;return"number"==typeof index&&(line=(inputStream.slice(0,index).match(/\n/g)||"").length),{line:line,column:column}}function getDebugInfo(index,inputStream,env){var filename=env.currentFileInfo.filename;return"browser"!==less.mode&&"rhino"!==less.mode&&(filename=require("path").resolve(filename)),{lineNumber:getLocation(index,inputStream).line+1,fileName:filename}}function LessError(e,env){var input=getInput(e,env),loc=getLocation(e.index,input),line=loc.line,col=loc.column,callLine=e.call&&getLocation(e.call,input).line,lines=input.split("\n");this.type=e.type||"Syntax",this.message=e.message,this.filename=e.filename||env.currentFileInfo.filename,this.index=e.index,this.line="number"==typeof line?line+1:null,this.callLine=callLine+1,this.callExtract=lines[callLine],this.stack=e.stack,this.column=col,this.extract=[lines[line-1],lines[line],lines[line+1]]}var input,i,j,furthest,chunks,current,currentPos,parser,parsers,saveStack=[],rootFilename=env&&env.filename;env instanceof tree.parseEnv||(env=new tree.parseEnv(env));var imports=this.imports={paths:env.paths||[],queue:[],files:env.files,contents:env.contents,contentsIgnoredChars:env.contentsIgnoredChars,mime:env.mime,error:null,push:function(path,currentFileInfo,importOptions,callback){var parserImports=this;this.queue.push(path);var fileParsedFunc=function(e,root,fullPath){parserImports.queue.splice(parserImports.queue.indexOf(path),1);var importedPreviously=fullPath===rootFilename;parserImports.files[fullPath]=root,e&&!parserImports.error&&(parserImports.error=e),callback(e,root,importedPreviously,fullPath)};less.Parser.importer?less.Parser.importer(path,currentFileInfo,fileParsedFunc,env):less.Parser.fileLoader(path,currentFileInfo,function(e,contents,fullPath,newFileInfo){if(e)return void fileParsedFunc(e);var newEnv=new tree.parseEnv(env);newEnv.currentFileInfo=newFileInfo,newEnv.processImports=!1,newEnv.contents[fullPath]=contents,(currentFileInfo.reference||importOptions.reference)&&(newFileInfo.reference=!0),importOptions.inline?fileParsedFunc(null,contents,fullPath):new less.Parser(newEnv).parse(contents,function(e,root){fileParsedFunc(e,root,fullPath)})},env)}},_$re=$re;return LessError.prototype=new Error,LessError.prototype.constructor=LessError,this.env=env=env||{},this.optimization="optimization"in this.env?this.env.optimization:1,parser={imports:imports,parse:function(str,callback,additionalData){var root,line,lines,globalVars,modifyVars,error=null,preText="";if(i=j=currentPos=furthest=0,globalVars=additionalData&&additionalData.globalVars?less.Parser.serializeVars(additionalData.globalVars)+"\n":"",modifyVars=additionalData&&additionalData.modifyVars?"\n"+less.Parser.serializeVars(additionalData.modifyVars):"",(globalVars||additionalData&&additionalData.banner)&&(preText=(additionalData&&additionalData.banner?additionalData.banner:"")+globalVars,parser.imports.contentsIgnoredChars[env.currentFileInfo.filename]=preText.length),str=str.replace(/\r\n/g,"\n"),input=str=preText+str.replace(/^\uFEFF/,"")+modifyVars,parser.imports.contents[env.currentFileInfo.filename]=str,chunks=function(input){function fail(msg,index){error=new LessError({index:index||parserCurrentIndex,type:"Parse",message:msg,filename:env.currentFileInfo.filename},env)}function emitChunk(force){var len=parserCurrentIndex-emitFrom;512>len&&!force||!len||(chunks.push(input.slice(emitFrom,parserCurrentIndex+1)),emitFrom=parserCurrentIndex+1)}var lastOpening,lastOpeningParen,lastMultiComment,lastMultiCommentEndBrace,parserCurrentIndex,currentChunkStartIndex,cc,cc2,matched,len=input.length,level=0,parenLevel=0,chunks=[],emitFrom=0;for(parserCurrentIndex=0;len>parserCurrentIndex;parserCurrentIndex++)if(cc=input.charCodeAt(parserCurrentIndex),!(cc>=97&&122>=cc||34>cc))switch(cc){case 40:parenLevel++,lastOpeningParen=parserCurrentIndex;continue;case 41:if(--parenLevel<0)return fail("missing opening `(`");continue;case 59:parenLevel||emitChunk();continue;case 123:level++,lastOpening=parserCurrentIndex;continue;case 125:if(--level<0)return fail("missing opening `{`");level||parenLevel||emitChunk();continue;case 92:if(len-1>parserCurrentIndex){parserCurrentIndex++;continue}return fail("unescaped `\\`");case 34:case 39:case 96:for(matched=0,currentChunkStartIndex=parserCurrentIndex,parserCurrentIndex+=1;len>parserCurrentIndex;parserCurrentIndex++)if(cc2=input.charCodeAt(parserCurrentIndex),!(cc2>96)){if(cc2==cc){matched=1;break}if(92==cc2){if(parserCurrentIndex==len-1)return fail("unescaped `\\`");parserCurrentIndex++}}if(matched)continue;return fail("unmatched `"+String.fromCharCode(cc)+"`",currentChunkStartIndex);case 47:if(parenLevel||parserCurrentIndex==len-1)continue;if(cc2=input.charCodeAt(parserCurrentIndex+1),47==cc2)for(parserCurrentIndex+=2;len>parserCurrentIndex&&(cc2=input.charCodeAt(parserCurrentIndex),!(13>=cc2)||10!=cc2&&13!=cc2);parserCurrentIndex++);else if(42==cc2){for(lastMultiComment=currentChunkStartIndex=parserCurrentIndex,parserCurrentIndex+=2;len-1>parserCurrentIndex&&(cc2=input.charCodeAt(parserCurrentIndex),125==cc2&&(lastMultiCommentEndBrace=parserCurrentIndex),42!=cc2||47!=input.charCodeAt(parserCurrentIndex+1));parserCurrentIndex++);if(parserCurrentIndex==len-1)return fail("missing closing `*/`",currentChunkStartIndex);parserCurrentIndex++}continue;case 42:if(len-1>parserCurrentIndex&&47==input.charCodeAt(parserCurrentIndex+1))return fail("unmatched `/*`");continue}return 0!==level?lastMultiComment>lastOpening&&lastMultiCommentEndBrace>lastMultiComment?fail("missing closing `}` or `*/`",lastOpening):fail("missing closing `}`",lastOpening):0!==parenLevel?fail("missing closing `)`",lastOpeningParen):(emitChunk(!0),chunks)}(str),error)return callback(new LessError(error,env));current=chunks[0];try{root=new tree.Ruleset(null,this.parsers.primary()),root.root=!0,root.firstRoot=!0}catch(e){return callback(new LessError(e,env))}if(root.toCSS=function(evaluate){return function(options,variables){options=options||{};var evaldRoot,css,evalEnv=new tree.evalEnv(options);"object"!=typeof variables||Array.isArray(variables)||(variables=Object.keys(variables).map(function(k){var value=variables[k];return value instanceof tree.Value||(value instanceof tree.Expression||(value=new tree.Expression([value])),value=new tree.Value([value])),new tree.Rule("@"+k,value,!1,null,0)}),evalEnv.frames=[new tree.Ruleset(null,variables)]);try{var i,preEvalVisitors=[],visitors=[new tree.joinSelectorVisitor,new tree.processExtendsVisitor,new tree.toCSSVisitor({compress:Boolean(options.compress)})],root=this;if(options.plugins)for(i=0;i<options.plugins.length;i++)options.plugins[i].isPreEvalVisitor?preEvalVisitors.push(options.plugins[i]):options.plugins[i].isPreVisitor?visitors.splice(0,0,options.plugins[i]):visitors.push(options.plugins[i]);for(i=0;i<preEvalVisitors.length;i++)preEvalVisitors[i].run(root);for(evaldRoot=evaluate.call(root,evalEnv),i=0;i<visitors.length;i++)visitors[i].run(evaldRoot);options.sourceMap&&(evaldRoot=new tree.sourceMapOutput({contentsIgnoredCharsMap:parser.imports.contentsIgnoredChars,writeSourceMap:options.writeSourceMap,rootNode:evaldRoot,contentsMap:parser.imports.contents,sourceMapFilename:options.sourceMapFilename,sourceMapURL:options.sourceMapURL,outputFilename:options.sourceMapOutputFilename,sourceMapBasepath:options.sourceMapBasepath,sourceMapRootpath:options.sourceMapRootpath,outputSourceFiles:options.outputSourceFiles,sourceMapGenerator:options.sourceMapGenerator})),css=evaldRoot.toCSS({compress:Boolean(options.compress),dumpLineNumbers:env.dumpLineNumbers,strictUnits:Boolean(options.strictUnits),numPrecision:8})}catch(e){throw new LessError(e,env)}if(options.cleancss&&"node"===less.mode){var CleanCSS=require("clean-css"),cleancssOptions=options.cleancssOptions||{};return cleancssOptions.keepSpecialComments===undefined&&(cleancssOptions.keepSpecialComments="*"),cleancssOptions.processImport=!1,cleancssOptions.noRebase=!0,cleancssOptions.noAdvanced===undefined&&(cleancssOptions.noAdvanced=!0),new CleanCSS(cleancssOptions).minify(css)}return options.compress?css.replace(/(^(\s)+)|((\s)+$)/g,""):css}}(root.eval),i<input.length-1){i=furthest;var loc=getLocation(i,input);lines=input.split("\n"),line=loc.line+1,error={type:"Parse",message:"Unrecognised input",index:i,filename:env.currentFileInfo.filename,line:line,column:loc.column,extract:[lines[line-2],lines[line-1],lines[line]]}}var finish=function(e){return e=error||e||parser.imports.error,e?(e instanceof LessError||(e=new LessError(e,env)),callback(e)):callback(null,root)};return env.processImports===!1?finish():void new tree.importVisitor(this.imports,finish).run(root)},parsers:parsers={primary:function(){for(var node,mixin=this.mixin,$re=_$re,root=[];current;){if(node=this.extendRule()||mixin.definition()||this.rule()||this.ruleset()||mixin.call()||this.comment()||this.rulesetCall()||this.directive())root.push(node);else if(!$re(/^[\s\n]+/)&&!$re(/^;+/))break;if(peekChar("}"))break}return root},comment:function(){var comment;if("/"===input.charAt(i))return"/"===input.charAt(i+1)?new tree.Comment($re(/^\/\/.*/),!0,i,env.currentFileInfo):(comment=$re(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/),comment?new tree.Comment(comment,!1,i,env.currentFileInfo):void 0)},comments:function(){for(var comment,comments=[];;){if(comment=this.comment(),!comment)break;comments.push(comment)}return comments},entities:{quoted:function(){var str,e,j=i,index=i;return"~"===input.charAt(j)&&(j++,e=!0),'"'===input.charAt(j)||"'"===input.charAt(j)?(e&&$char("~"),str=$re(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/),str?new tree.Quoted(str[0],str[1]||str[2],e,index,env.currentFileInfo):void 0):void 0},keyword:function(){var k;if(k=$re(/^%|^[_A-Za-z-][_A-Za-z0-9-]*/)){var color=tree.Color.fromKeyword(k);return color?color:new tree.Keyword(k)}},call:function(){var name,nameLC,args,alpha_ret,index=i;if(name=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(current)){if(name=name[1],nameLC=name.toLowerCase(),"url"===nameLC)return null;if(i+=name.length,"alpha"===nameLC&&(alpha_ret=parsers.alpha(),"undefined"!=typeof alpha_ret))return alpha_ret;if($char("("),args=this.arguments(),$char(")"))return name?new tree.Call(name,args,index,env.currentFileInfo):void 0}},arguments:function(){for(var arg,args=[];;){if(arg=this.assignment()||parsers.expression(),!arg)break;if(args.push(arg),!$char(","))break}return args},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var key,value;return key=$re(/^\w+(?=\s?=)/i),key&&$char("=")?(value=parsers.entity(),value?new tree.Assignment(key,value):void 0):void 0},url:function(){var value;if("u"===input.charAt(i)&&$re(/^url\(/))return value=this.quoted()||this.variable()||$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",expectChar(")"),new tree.URL(null!=value.value||value instanceof tree.Variable?value:new tree.Anonymous(value),env.currentFileInfo)},variable:function(){var name,index=i;return"@"===input.charAt(i)&&(name=$re(/^@@?[\w-]+/))?new tree.Variable(name,index,env.currentFileInfo):void 0},variableCurly:function(){var curly,index=i;return"@"===input.charAt(i)&&(curly=$re(/^@\{([\w-]+)\}/))?new tree.Variable("@"+curly[1],index,env.currentFileInfo):void 0},color:function(){var rgb;if("#"===input.charAt(i)&&(rgb=$re(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))){var colorCandidateString=rgb.input.match(/^#([\w]+).*/);return colorCandidateString=colorCandidateString[1],colorCandidateString.match(/^[A-Fa-f0-9]+$/)||error("Invalid HEX color code"),new tree.Color(rgb[1])}},dimension:function(){var value,c=input.charCodeAt(i);if(!(c>57||43>c||47===c||44==c))return value=$re(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/),value?new tree.Dimension(value[1],value[2]):void 0},unicodeDescriptor:function(){var ud;return ud=$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/),ud?new tree.UnicodeDescriptor(ud[0]):void 0},javascript:function(){var str,e,j=i;return"~"===input.charAt(j)&&(j++,e=!0),"`"===input.charAt(j)?(env.javascriptEnabled===undefined||env.javascriptEnabled||error("You are using JavaScript, which has been disabled."),e&&$char("~"),str=$re(/^`([^`]*)`/),str?new tree.JavaScript(str[1],i,e):void 0):void 0}},variable:function(){var name;return"@"===input.charAt(i)&&(name=$re(/^(@[\w-]+)\s*:/))?name[1]:void 0},rulesetCall:function(){var name;return"@"===input.charAt(i)&&(name=$re(/^(@[\w-]+)\s*\(\s*\)\s*;/))?new tree.RulesetCall(name[1]):void 0},extend:function(isRule){var elements,e,option,extendList,extend,index=i;if($re(isRule?/^&:extend\(/:/^:extend\(/)){do{for(option=null,elements=null;!(option=$re(/^(all)(?=\s*(\)|,))/))&&(e=this.element());)elements?elements.push(e):elements=[e];option=option&&option[1],elements||error("Missing target selector for :extend()."),extend=new tree.Extend(new tree.Selector(elements),option,index),extendList?extendList.push(extend):extendList=[extend]}while($char(","));return expect(/^\)/),isRule&&expect(/^;/),extendList}},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var elemIndex,elements,elem,e,c,args,s=input.charAt(i),important=!1,index=i;if("."===s||"#"===s){for(save();;){if(elemIndex=i,e=$re(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/),!e)break;elem=new tree.Element(c,e,elemIndex,env.currentFileInfo),elements?elements.push(elem):elements=[elem],c=$char(">")}return elements&&($char("(")&&(args=this.args(!0).args,expectChar(")")),parsers.important()&&(important=!0),parsers.end())?(forget(),new tree.mixin.Call(elements,args,index,env.currentFileInfo,important)):void restore()}},args:function(isCall){var isSemiColonSeperated,expressionContainsNamed,name,nameLoop,value,arg,parsers=parser.parsers,entities=parsers.entities,returner={args:null,variadic:!1},expressions=[],argsSemiColon=[],argsComma=[];for(save();;){if(isCall)arg=parsers.detachedRuleset()||parsers.expression();else{if(parsers.comments(),"."===input.charAt(i)&&$re(/^\.{3}/)){returner.variadic=!0,$char(";")&&!isSemiColonSeperated&&(isSemiColonSeperated=!0),(isSemiColonSeperated?argsSemiColon:argsComma).push({variadic:!0});break}arg=entities.variable()||entities.literal()||entities.keyword()}if(!arg)break;nameLoop=null,arg.throwAwayComments&&arg.throwAwayComments(),value=arg;var val=null;if(isCall?arg.value&&1==arg.value.length&&(val=arg.value[0]):val=arg,val&&val instanceof tree.Variable)if($char(":")){if(expressions.length>0&&(isSemiColonSeperated&&error("Cannot mix ; and , as delimiter types"),expressionContainsNamed=!0),value=isCall&&parsers.detachedRuleset()||parsers.expression(),!value){if(!isCall)return restore(),returner.args=[],returner;error("could not understand value for named argument")}nameLoop=name=val.name}else{if(!isCall&&$re(/^\.{3}/)){returner.variadic=!0,$char(";")&&!isSemiColonSeperated&&(isSemiColonSeperated=!0),(isSemiColonSeperated?argsSemiColon:argsComma).push({name:arg.name,variadic:!0});break}isCall||(name=nameLoop=val.name,value=null)}value&&expressions.push(value),argsComma.push({name:nameLoop,value:value}),$char(",")||($char(";")||isSemiColonSeperated)&&(expressionContainsNamed&&error("Cannot mix ; and , as delimiter types"),isSemiColonSeperated=!0,expressions.length>1&&(value=new tree.Value(expressions)),argsSemiColon.push({name:name,value:value}),name=null,expressions=[],expressionContainsNamed=!1)}return forget(),returner.args=isSemiColonSeperated?argsSemiColon:argsComma,returner},definition:function(){var name,match,ruleset,cond,params=[],variadic=!1;if(!("."!==input.charAt(i)&&"#"!==input.charAt(i)||peek(/^[^{]*\}/)))if(save(),match=$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){name=match[1];var argInfo=this.args(!1);if(params=argInfo.args,variadic=argInfo.variadic,!$char(")"))return furthest=i,void restore();if(parsers.comments(),$re(/^when/)&&(cond=expect(parsers.conditions,"expected condition")),ruleset=parsers.block())return forget(),new tree.mixin.Definition(name,params,ruleset,cond,variadic);restore()}else forget()}},entity:function(){var entities=this.entities;return entities.literal()||entities.variable()||entities.url()||entities.call()||entities.keyword()||entities.javascript()||this.comment()},end:function(){return $char(";")||peekChar("}")},alpha:function(){var value;if($re(/^\(opacity=/i))return value=$re(/^\d+/)||this.entities.variable(),value?(expectChar(")"),new tree.Alpha(value)):void 0},element:function(){var e,c,v,index=i;return c=this.combinator(),e=$re(/^(?:\d+\.\d+|\d+)%/)||$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||$char("*")||$char("&")||this.attribute()||$re(/^\([^()@]+\)/)||$re(/^[\.#](?=@)/)||this.entities.variableCurly(),e||(save(),$char("(")?(v=this.selector())&&$char(")")?(e=new tree.Paren(v),forget()):restore():forget()),e?new tree.Element(c,e,index,env.currentFileInfo):void 0},combinator:function(){var c=input.charAt(i);if(">"===c||"+"===c||"~"===c||"|"===c||"^"===c){for(i++,"^"===input.charAt(i)&&(c="^^",i++);isWhitespace(input,i);)i++;return new tree.Combinator(c)}return new tree.Combinator(isWhitespace(input,i-1)?" ":null)},lessSelector:function(){return this.selector(!0)},selector:function(isLess){for(var elements,extendList,c,e,extend,when,condition,index=i,$re=_$re;(isLess&&(extend=this.extend())||isLess&&(when=$re(/^when/))||(e=this.element()))&&(when?condition=expect(this.conditions,"expected condition"):condition?error("CSS guard can only be used at the end of selector"):extend?extendList?extendList.push(extend):extendList=[extend]:(extendList&&error("Extend can only be used at the end of selector"),c=input.charAt(i),elements?elements.push(e):elements=[e],e=null),"{"!==c&&"}"!==c&&";"!==c&&","!==c&&")"!==c););return elements?new tree.Selector(elements,extendList,condition,index,env.currentFileInfo):void(extendList&&error("Extend must be used to extend a selector, it cannot be used on its own"))},attribute:function(){if($char("[")){var key,val,op,entities=this.entities;return(key=entities.variableCurly())||(key=expect(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),op=$re(/^[|~*$^]?=/),op&&(val=entities.quoted()||$re(/^[0-9]+%/)||$re(/^[\w-]+/)||entities.variableCurly()),expectChar("]"),new tree.Attribute(key,op,val)}},block:function(){var content;return $char("{")&&(content=this.primary())&&$char("}")?content:void 0},blockRuleset:function(){var block=this.block();return block&&(block=new tree.Ruleset(null,block)),block},detachedRuleset:function(){var blockRuleset=this.blockRuleset();
return blockRuleset?new tree.DetachedRuleset(blockRuleset):void 0},ruleset:function(){var selectors,s,rules,debugInfo;for(save(),env.dumpLineNumbers&&(debugInfo=getDebugInfo(i,input,env));;){if(s=this.lessSelector(),!s)break;if(selectors?selectors.push(s):selectors=[s],this.comments(),s.condition&&selectors.length>1&&error("Guards are only currently allowed on a single selector."),!$char(","))break;s.condition&&error("Guards are only currently allowed on a single selector."),this.comments()}if(selectors&&(rules=this.block())){forget();var ruleset=new tree.Ruleset(selectors,rules,env.strictImports);return env.dumpLineNumbers&&(ruleset.debugInfo=debugInfo),ruleset}furthest=i,restore()},rule:function(tryAnonymous){var name,value,important,merge,isVariable,startOfRule=i,c=input.charAt(startOfRule);if("."!==c&&"#"!==c&&"&"!==c)if(save(),name=this.variable()||this.ruleProperty()){if(isVariable="string"==typeof name,isVariable&&(value=this.detachedRuleset()),value||(value=tryAnonymous||!env.compress&&!isVariable?this.anonymousValue()||this.value():this.value()||this.anonymousValue(),important=this.important(),merge=!isVariable&&name.pop().value),value&&this.end())return forget(),new tree.Rule(name,value,important,merge,startOfRule,env.currentFileInfo);if(furthest=i,restore(),value&&!tryAnonymous)return this.rule(!0)}else forget()},anonymousValue:function(){var match;return match=/^([^@+\/'"*`(;{}-]*);/.exec(current),match?(i+=match[0].length-1,new tree.Anonymous(match[1])):void 0},"import":function(){var path,features,index=i,dir=$re(/^@import?\s+/);if(dir){var options=(dir?this.importOptions():null)||{};if(path=this.entities.quoted()||this.entities.url())return features=this.mediaFeatures(),$(";")||(i=index,error("missing semi-colon or unrecognised media features on import")),features=features&&new tree.Value(features),new tree.Import(path,features,options,index,env.currentFileInfo);i=index,error("malformed import statement")}},importOptions:function(){var o,optionName,value,options={};if(!$char("("))return null;do if(o=this.importOption()){switch(optionName=o,value=!0,optionName){case"css":optionName="less",value=!1;break;case"once":optionName="multiple",value=!1}if(options[optionName]=value,!$char(","))break}while(o);return expectChar(")"),options},importOption:function(){var opt=$re(/^(less|css|multiple|once|inline|reference)/);return opt?opt[1]:void 0},mediaFeature:function(){var e,p,entities=this.entities,nodes=[];do if(e=entities.keyword()||entities.variable())nodes.push(e);else if($char("(")){if(p=this.property(),e=this.value(),!$char(")"))return null;if(p&&e)nodes.push(new tree.Paren(new tree.Rule(p,e,null,null,i,env.currentFileInfo,!0)));else{if(!e)return null;nodes.push(new tree.Paren(e))}}while(e);return nodes.length>0?new tree.Expression(nodes):void 0},mediaFeatures:function(){var e,entities=this.entities,features=[];do if(e=this.mediaFeature()){if(features.push(e),!$char(","))break}else if(e=entities.variable(),e&&(features.push(e),!$char(",")))break;while(e);return features.length>0?features:null},media:function(){var features,rules,media,debugInfo;return env.dumpLineNumbers&&(debugInfo=getDebugInfo(i,input,env)),$re(/^@media/)&&(features=this.mediaFeatures(),rules=this.block())?(media=new tree.Media(rules,features,i,env.currentFileInfo),env.dumpLineNumbers&&(media.debugInfo=debugInfo),media):void 0},directive:function(){var name,value,rules,nonVendorSpecificName,hasIdentifier,hasExpression,hasUnknown,index=i,hasBlock=!0;if("@"===input.charAt(i)){if(value=this["import"]()||this.media())return value;if(save(),name=$re(/^@[a-z-]+/)){switch(nonVendorSpecificName=name,"-"==name.charAt(1)&&name.indexOf("-",2)>0&&(nonVendorSpecificName="@"+name.slice(name.indexOf("-",2)+1)),nonVendorSpecificName){case"@charset":hasIdentifier=!0,hasBlock=!1;break;case"@namespace":hasExpression=!0,hasBlock=!1;break;case"@keyframes":hasIdentifier=!0;break;case"@host":case"@page":case"@document":case"@supports":hasUnknown=!0}return hasIdentifier?(value=this.entity(),value||error("expected "+name+" identifier")):hasExpression?(value=this.expression(),value||error("expected "+name+" expression")):hasUnknown&&(value=($re(/^[^{;]+/)||"").trim(),value&&(value=new tree.Anonymous(value))),hasBlock&&(rules=this.blockRuleset()),rules||!hasBlock&&value&&$char(";")?(forget(),new tree.Directive(name,value,rules,index,env.currentFileInfo,env.dumpLineNumbers?getDebugInfo(index,input,env):null)):void restore()}}},value:function(){var e,expressions=[];do if(e=this.expression(),e&&(expressions.push(e),!$char(",")))break;while(e);return expressions.length>0?new tree.Value(expressions):void 0},important:function(){return"!"===input.charAt(i)?$re(/^! *important/):void 0},sub:function(){var a,e;return $char("(")&&(a=this.addition())?(e=new tree.Expression([a]),expectChar(")"),e.parens=!0,e):void 0},multiplication:function(){var m,a,op,operation,isSpaced;if(m=this.operand()){for(isSpaced=isWhitespace(input,i-1);;){if(peek(/^\/[*\/]/))break;if(save(),op=$char("/")||$char("*"),!op){forget();break}if(a=this.operand(),!a){restore();break}forget(),m.parensInOp=!0,a.parensInOp=!0,operation=new tree.Operation(op,[operation||m,a],isSpaced),isSpaced=isWhitespace(input,i-1)}return operation||m}},addition:function(){var m,a,op,operation,isSpaced;if(m=this.multiplication()){for(isSpaced=isWhitespace(input,i-1);;){if(op=$re(/^[-+]\s+/)||!isSpaced&&($char("+")||$char("-")),!op)break;if(a=this.multiplication(),!a)break;m.parensInOp=!0,a.parensInOp=!0,operation=new tree.Operation(op,[operation||m,a],isSpaced),isSpaced=isWhitespace(input,i-1)}return operation||m}},conditions:function(){var a,b,condition,index=i;if(a=this.condition()){for(;;){if(!peek(/^,\s*(not\s*)?\(/)||!$char(","))break;if(b=this.condition(),!b)break;condition=new tree.Condition("or",condition||a,b,index)}return condition||a}},condition:function(){var a,b,c,op,entities=this.entities,index=i,negate=!1;return $re(/^not/)&&(negate=!0),expectChar("("),a=this.addition()||entities.keyword()||entities.quoted(),a?(op=$re(/^(?:>=|<=|=<|[<=>])/),op?(b=this.addition()||entities.keyword()||entities.quoted(),b?c=new tree.Condition(op,a,b,index,negate):error("expected expression")):c=new tree.Condition("=",a,new tree.Keyword("true"),index,negate),expectChar(")"),$re(/^and/)?new tree.Condition("and",c,this.condition()):c):void 0},operand:function(){var negate,entities=this.entities,p=input.charAt(i+1);"-"!==input.charAt(i)||"@"!==p&&"("!==p||(negate=$char("-"));var o=this.sub()||entities.dimension()||entities.color()||entities.variable()||entities.call();return negate&&(o.parensInOp=!0,o=new tree.Negative(o)),o},expression:function(){var e,delim,entities=[];do e=this.addition()||this.entity(),e&&(entities.push(e),peek(/^\/[\/*]/)||(delim=$char("/"),delim&&entities.push(new tree.Anonymous(delim))));while(e);return entities.length>0?new tree.Expression(entities):void 0},property:function(){var name=$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);return name?name[1]:void 0},ruleProperty:function(){function match(re){var a=re.exec(c);return a?(index.push(i+length),length+=a[0].length,c=c.slice(a[1].length),name.push(a[1])):void 0}var s,k,c=current,name=[],index=[],length=0;for(match(/^(\*?)/);match(/^((?:[\w-]+)|(?:@\{[\w-]+\}))/););if(name.length>1&&match(/^\s*((?:\+_|\+)?)\s*:/)){for(skipWhitespace(length),""===name[0]&&(name.shift(),index.shift()),k=0;k<name.length;k++)s=name[k],name[k]="@"!==s.charAt(0)?new tree.Keyword(s):new tree.Variable("@"+s.slice(2,-1),index[k],env.currentFileInfo);return name}}}}},less.Parser.serializeVars=function(vars){var s="";for(var name in vars)if(Object.hasOwnProperty.call(vars,name)){var value=vars[name];s+=("@"===name[0]?"":"@")+name+": "+value+(";"===(""+value).slice(-1)?"":";")}return s},function(tree){function _math(fn,unit,n){if(!(n instanceof tree.Dimension))throw{type:"Argument",message:"argument must be a number"};return null==unit?unit=n.unit:n=n.unify(),new tree.Dimension(fn(parseFloat(n.value)),unit)}function colorBlend(mode,color1,color2){var cb,cs,ar,cr,ab=color1.alpha,as=color2.alpha,r=[];ar=as+ab*(1-as);for(var i=0;3>i;i++)cb=color1.rgb[i]/255,cs=color2.rgb[i]/255,cr=mode(cb,cs),ar&&(cr=(as*cs+ab*(cb-as*(cb+cs-cr)))/ar),r[i]=255*cr;return new tree.Color(r,ar)}function initFunctions(){var f,tf=tree.functions;for(f in mathFunctions)mathFunctions.hasOwnProperty(f)&&(tf[f]=_math.bind(null,Math[f],mathFunctions[f]));for(f in colorBlendMode)colorBlendMode.hasOwnProperty(f)&&(tf[f]=colorBlend.bind(null,colorBlendMode[f]));f=tree.defaultFunc,tf["default"]=f.eval.bind(f)}function hsla(color){return tree.functions.hsla(color.h,color.s,color.l,color.a)}function scaled(n,size){return n instanceof tree.Dimension&&n.unit.is("%")?parseFloat(n.value*size/100):number(n)}function number(n){if(n instanceof tree.Dimension)return parseFloat(n.unit.is("%")?n.value/100:n.value);if("number"==typeof n)return n;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function clamp(val){return Math.min(1,Math.max(0,val))}tree.functions={rgb:function(r,g,b){return this.rgba(r,g,b,1)},rgba:function(r,g,b,a){var rgb=[r,g,b].map(function(c){return scaled(c,255)});return a=number(a),new tree.Color(rgb,a)},hsl:function(h,s,l){return this.hsla(h,s,l,1)},hsla:function(h,s,l,a){function hue(h){return h=0>h?h+1:h>1?h-1:h,1>6*h?m1+(m2-m1)*h*6:1>2*h?m2:2>3*h?m1+(m2-m1)*(2/3-h)*6:m1}h=number(h)%360/360,s=clamp(number(s)),l=clamp(number(l)),a=clamp(number(a));var m2=.5>=l?l*(s+1):l+s-l*s,m1=2*l-m2;return this.rgba(255*hue(h+1/3),255*hue(h),255*hue(h-1/3),a)},hsv:function(h,s,v){return this.hsva(h,s,v,1)},hsva:function(h,s,v,a){h=number(h)%360/360*360,s=number(s),v=number(v),a=number(a);var i,f;i=Math.floor(h/60%6),f=h/60-i;var vs=[v,v*(1-s),v*(1-f*s),v*(1-(1-f)*s)],perm=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(255*vs[perm[i][0]],255*vs[perm[i][1]],255*vs[perm[i][2]],a)},hue:function(color){return new tree.Dimension(color.toHSL().h)},saturation:function(color){return new tree.Dimension(100*color.toHSL().s,"%")},lightness:function(color){return new tree.Dimension(100*color.toHSL().l,"%")},hsvhue:function(color){return new tree.Dimension(color.toHSV().h)},hsvsaturation:function(color){return new tree.Dimension(100*color.toHSV().s,"%")},hsvvalue:function(color){return new tree.Dimension(100*color.toHSV().v,"%")},red:function(color){return new tree.Dimension(color.rgb[0])},green:function(color){return new tree.Dimension(color.rgb[1])},blue:function(color){return new tree.Dimension(color.rgb[2])},alpha:function(color){return new tree.Dimension(color.toHSL().a)},luma:function(color){return new tree.Dimension(color.luma()*color.alpha*100,"%")},luminance:function(color){var luminance=.2126*color.rgb[0]/255+.7152*color.rgb[1]/255+.0722*color.rgb[2]/255;return new tree.Dimension(luminance*color.alpha*100,"%")},saturate:function(color,amount){if(!color.rgb)return null;var hsl=color.toHSL();return hsl.s+=amount.value/100,hsl.s=clamp(hsl.s),hsla(hsl)},desaturate:function(color,amount){var hsl=color.toHSL();return hsl.s-=amount.value/100,hsl.s=clamp(hsl.s),hsla(hsl)},lighten:function(color,amount){var hsl=color.toHSL();return hsl.l+=amount.value/100,hsl.l=clamp(hsl.l),hsla(hsl)},darken:function(color,amount){var hsl=color.toHSL();return hsl.l-=amount.value/100,hsl.l=clamp(hsl.l),hsla(hsl)},fadein:function(color,amount){var hsl=color.toHSL();return hsl.a+=amount.value/100,hsl.a=clamp(hsl.a),hsla(hsl)},fadeout:function(color,amount){var hsl=color.toHSL();return hsl.a-=amount.value/100,hsl.a=clamp(hsl.a),hsla(hsl)},fade:function(color,amount){var hsl=color.toHSL();return hsl.a=amount.value/100,hsl.a=clamp(hsl.a),hsla(hsl)},spin:function(color,amount){var hsl=color.toHSL(),hue=(hsl.h+amount.value)%360;return hsl.h=0>hue?360+hue:hue,hsla(hsl)},mix:function(color1,color2,weight){weight||(weight=new tree.Dimension(50));var p=weight.value/100,w=2*p-1,a=color1.toHSL().a-color2.toHSL().a,w1=((w*a==-1?w:(w+a)/(1+w*a))+1)/2,w2=1-w1,rgb=[color1.rgb[0]*w1+color2.rgb[0]*w2,color1.rgb[1]*w1+color2.rgb[1]*w2,color1.rgb[2]*w1+color2.rgb[2]*w2],alpha=color1.alpha*p+color2.alpha*(1-p);return new tree.Color(rgb,alpha)},greyscale:function(color){return this.desaturate(color,new tree.Dimension(100))},contrast:function(color,dark,light,threshold){if(!color.rgb)return null;if("undefined"==typeof light&&(light=this.rgba(255,255,255,1)),"undefined"==typeof dark&&(dark=this.rgba(0,0,0,1)),dark.luma()>light.luma()){var t=light;light=dark,dark=t}return threshold="undefined"==typeof threshold?.43:number(threshold),color.luma()<threshold?light:dark},e:function(str){return new tree.Anonymous(str instanceof tree.JavaScript?str.evaluated:str.value)},escape:function(str){return new tree.Anonymous(encodeURI(str.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(string,pattern,replacement,flags){var result=string.value;return result=result.replace(new RegExp(pattern.value,flags?flags.value:""),replacement.value),new tree.Quoted(string.quote||"",result,string.escaped)},"%":function(string){for(var args=Array.prototype.slice.call(arguments,1),result=string.value,i=0;i<args.length;i++)result=result.replace(/%[sda]/i,function(token){var value=token.match(/s/i)?args[i].value:args[i].toCSS();return token.match(/[A-Z]$/)?encodeURIComponent(value):value});return result=result.replace(/%%/g,"%"),new tree.Quoted(string.quote||"",result,string.escaped)},unit:function(val,unit){if(!(val instanceof tree.Dimension))throw{type:"Argument",message:"the first argument to unit must be a number"+(val instanceof tree.Operation?". Have you forgotten parenthesis?":"")};return unit=unit?unit instanceof tree.Keyword?unit.value:unit.toCSS():"",new tree.Dimension(val.value,unit)},convert:function(val,unit){return val.convertTo(unit.value)},round:function(n,f){var fraction="undefined"==typeof f?0:f.value;return _math(function(num){return num.toFixed(fraction)},null,n)},pi:function(){return new tree.Dimension(Math.PI)},mod:function(a,b){return new tree.Dimension(a.value%b.value,a.unit)},pow:function(x,y){if("number"==typeof x&&"number"==typeof y)x=new tree.Dimension(x),y=new tree.Dimension(y);else if(!(x instanceof tree.Dimension&&y instanceof tree.Dimension))throw{type:"Argument",message:"arguments must be numbers"};return new tree.Dimension(Math.pow(x.value,y.value),x.unit)},_minmax:function(isMin,args){switch(args=Array.prototype.slice.call(args),args.length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var i,j,current,currentUnified,referenceUnified,unit,unitStatic,unitClone,order=[],values={};for(i=0;i<args.length;i++)if(current=args[i],current instanceof tree.Dimension)if(currentUnified=""===current.unit.toString()&&unitClone!==undefined?new tree.Dimension(current.value,unitClone).unify():current.unify(),unit=""===currentUnified.unit.toString()&&unitStatic!==undefined?unitStatic:currentUnified.unit.toString(),unitStatic=""!==unit&&unitStatic===undefined||""!==unit&&""===order[0].unify().unit.toString()?unit:unitStatic,unitClone=""!==unit&&unitClone===undefined?current.unit.toString():unitClone,j=values[""]!==undefined&&""!==unit&&unit===unitStatic?values[""]:values[unit],j!==undefined)referenceUnified=""===order[j].unit.toString()&&unitClone!==undefined?new tree.Dimension(order[j].value,unitClone).unify():order[j].unify(),(isMin&&currentUnified.value<referenceUnified.value||!isMin&&currentUnified.value>referenceUnified.value)&&(order[j]=current);else{if(unitStatic!==undefined&&unit!==unitStatic)throw{type:"Argument",message:"incompatible types"};values[unit]=order.length,order.push(current)}else Array.isArray(args[i].value)&&Array.prototype.push.apply(args,Array.prototype.slice.call(args[i].value));return 1==order.length?order[0]:(args=order.map(function(a){return a.toCSS(this.env)}).join(this.env.compress?",":", "),new tree.Anonymous((isMin?"min":"max")+"("+args+")"))},min:function(){return this._minmax(!0,arguments)},max:function(){return this._minmax(!1,arguments)},"get-unit":function(n){return new tree.Anonymous(n.unit)},argb:function(color){return new tree.Anonymous(color.toARGB())},percentage:function(n){return new tree.Dimension(100*n.value,"%")},color:function(n){if(n instanceof tree.Quoted){var returnColor,colorCandidate=n.value;if(returnColor=tree.Color.fromKeyword(colorCandidate))return returnColor;if(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/.test(colorCandidate))return new tree.Color(colorCandidate.slice(1));throw{type:"Argument",message:"argument must be a color keyword or 3/6 digit hex e.g. #FFF"}}throw{type:"Argument",message:"argument must be a string"}},iscolor:function(n){return this._isa(n,tree.Color)},isnumber:function(n){return this._isa(n,tree.Dimension)},isstring:function(n){return this._isa(n,tree.Quoted)},iskeyword:function(n){return this._isa(n,tree.Keyword)},isurl:function(n){return this._isa(n,tree.URL)},ispixel:function(n){return this.isunit(n,"px")},ispercentage:function(n){return this.isunit(n,"%")},isem:function(n){return this.isunit(n,"em")},isunit:function(n,unit){return n instanceof tree.Dimension&&n.unit.is(unit.value||unit)?tree.True:tree.False},_isa:function(n,Type){return n instanceof Type?tree.True:tree.False},tint:function(color,amount){return this.mix(this.rgb(255,255,255),color,amount)},shade:function(color,amount){return this.mix(this.rgb(0,0,0),color,amount)},extract:function(values,index){return index=index.value-1,Array.isArray(values.value)?values.value[index]:Array(values)[index]},length:function(values){var n=Array.isArray(values.value)?values.value.length:1;return new tree.Dimension(n)},"data-uri":function(mimetypeNode,filePathNode){if("undefined"!=typeof window)return new tree.URL(filePathNode||mimetypeNode,this.currentFileInfo).eval(this.env);var mimetype=mimetypeNode.value,filePath=filePathNode&&filePathNode.value,fs=require("./fs"),path=require("path"),useBase64=!1;if(arguments.length<2&&(filePath=mimetype),this.env.isPathRelative(filePath)&&(filePath=this.currentFileInfo.relativeUrls?path.join(this.currentFileInfo.currentDirectory,filePath):path.join(this.currentFileInfo.entryPath,filePath)),arguments.length<2){var mime;try{mime=require("mime")}catch(ex){mime=tree._mime}mimetype=mime.lookup(filePath);var charset=mime.charsets.lookup(mimetype);useBase64=["US-ASCII","UTF-8"].indexOf(charset)<0,useBase64&&(mimetype+=";base64")}else useBase64=/;base64$/.test(mimetype);var buf=fs.readFileSync(filePath),DATA_URI_MAX_KB=32,fileSizeInKB=parseInt(buf.length/1024,10);if(fileSizeInKB>=DATA_URI_MAX_KB&&this.env.ieCompat!==!1)return this.env.silent||console.warn("Skipped data-uri embedding of %s because its size (%dKB) exceeds IE8-safe %dKB!",filePath,fileSizeInKB,DATA_URI_MAX_KB),new tree.URL(filePathNode||mimetypeNode,this.currentFileInfo).eval(this.env);buf=useBase64?buf.toString("base64"):encodeURIComponent(buf);var uri='"data:'+mimetype+","+buf+'"';return new tree.URL(new tree.Anonymous(uri))},"svg-gradient":function(direction){function throwArgumentDescriptor(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position]"}}arguments.length<3&&throwArgumentDescriptor();var gradientDirectionSvg,returner,i,color,position,positionValue,alpha,stops=Array.prototype.slice.call(arguments,1),gradientType="linear",rectangleDimension='x="0" y="0" width="1" height="1"',useBase64=!0,renderEnv={compress:!1},directionValue=direction.toCSS(renderEnv);switch(directionValue){case"to bottom":gradientDirectionSvg='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":gradientDirectionSvg='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":gradientDirectionSvg='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":gradientDirectionSvg='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":gradientType="radial",gradientDirectionSvg='cx="50%" cy="50%" r="75%"',rectangleDimension='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(returner='<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><'+gradientType+'Gradient id="gradient" gradientUnits="userSpaceOnUse" '+gradientDirectionSvg+">",i=0;i<stops.length;i+=1)stops[i].value?(color=stops[i].value[0],position=stops[i].value[1]):(color=stops[i],position=undefined),color instanceof tree.Color&&((0===i||i+1===stops.length)&&position===undefined||position instanceof tree.Dimension)||throwArgumentDescriptor(),positionValue=position?position.toCSS(renderEnv):0===i?"0%":"100%",alpha=color.alpha,returner+='<stop offset="'+positionValue+'" stop-color="'+color.toRGB()+'"'+(1>alpha?' stop-opacity="'+alpha+'"':"")+"/>";if(returner+="</"+gradientType+"Gradient><rect "+rectangleDimension+' fill="url(#gradient)" /></svg>',useBase64)try{returner=require("./encoder").encodeBase64(returner)}catch(e){useBase64=!1}return returner="'data:image/svg+xml"+(useBase64?";base64":"")+","+returner+"'",new tree.URL(new tree.Anonymous(returner))}},tree._mime={_types:{".htm":"text/html",".html":"text/html",".gif":"image/gif",".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png"},lookup:function(filepath){var ext=require("path").extname(filepath),type=tree._mime._types[ext];if(type===undefined)throw new Error('Optional dependency "mime" is required for '+ext);return type},charsets:{lookup:function(type){return type&&/^text\//.test(type)?"UTF-8":""}}};var mathFunctions={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"},colorBlendMode={multiply:function(cb,cs){return cb*cs},screen:function(cb,cs){return cb+cs-cb*cs},overlay:function(cb,cs){return cb*=2,1>=cb?colorBlendMode.multiply(cb,cs):colorBlendMode.screen(cb-1,cs)},softlight:function(cb,cs){var d=1,e=cb;return cs>.5&&(e=1,d=cb>.25?Math.sqrt(cb):((16*cb-12)*cb+4)*cb),cb-(1-2*cs)*e*(d-cb)},hardlight:function(cb,cs){return colorBlendMode.overlay(cs,cb)},difference:function(cb,cs){return Math.abs(cb-cs)},exclusion:function(cb,cs){return cb+cs-2*cb*cs},average:function(cb,cs){return(cb+cs)/2},negation:function(cb,cs){return 1-Math.abs(cb+cs-1)}};tree.defaultFunc={eval:function(){var v=this.value_,e=this.error_;if(e)throw e;return null!=v?v?tree.True:tree.False:void 0},value:function(v){this.value_=v},error:function(e){this.error_=e},reset:function(){this.value_=this.error_=null}},initFunctions(),tree.fround=function(env,value){var p=env&&env.numPrecision;return null==p?value:Number((value+2e-16).toFixed(p))},tree.functionCall=function(env,currentFileInfo){this.env=env,this.currentFileInfo=currentFileInfo},tree.functionCall.prototype=tree.functions}(require("./tree")),function(tree){tree.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(require("./tree")),function(tree){tree.debugInfo=function(env,ctx,lineSeperator){var result="";if(env.dumpLineNumbers&&!env.compress)switch(env.dumpLineNumbers){case"comments":result=tree.debugInfo.asComment(ctx);break;case"mediaquery":result=tree.debugInfo.asMediaQuery(ctx);break;case"all":result=tree.debugInfo.asComment(ctx)+(lineSeperator||"")+tree.debugInfo.asMediaQuery(ctx)}return result},tree.debugInfo.asComment=function(ctx){return"/* line "+ctx.debugInfo.lineNumber+", "+ctx.debugInfo.fileName+" */\n"},tree.debugInfo.asMediaQuery=function(ctx){return"@media -sass-debug-info{filename{font-family:"+("file://"+ctx.debugInfo.fileName).replace(/([.:\/\\])/g,function(a){return"\\"==a&&(a="/"),"\\"+a})+"}line{font-family:\\00003"+ctx.debugInfo.lineNumber+"}}\n"},tree.find=function(obj,fun){for(var r,i=0;i<obj.length;i++)if(r=fun.call(obj,obj[i]))return r;return null},tree.jsify=function(obj){return Array.isArray(obj.value)&&obj.value.length>1?"["+obj.value.map(function(v){return v.toCSS()}).join(", ")+"]":obj.toCSS()},tree.toCSS=function(env){var strs=[];return this.genCSS(env,{add:function(chunk){strs.push(chunk)},isEmpty:function(){return 0===strs.length}}),strs.join("")},tree.outputRuleset=function(env,output,rules){var i,ruleCnt=rules.length;if(env.tabLevel=(0|env.tabLevel)+1,env.compress){for(output.add("{"),i=0;ruleCnt>i;i++)rules[i].genCSS(env,output);return output.add("}"),void env.tabLevel--}var tabSetStr="\n"+Array(env.tabLevel).join("  "),tabRuleStr=tabSetStr+"  ";if(ruleCnt){for(output.add(" {"+tabRuleStr),rules[0].genCSS(env,output),i=1;ruleCnt>i;i++)output.add(tabRuleStr),rules[i].genCSS(env,output);output.add(tabSetStr+"}")}else output.add(" {"+tabSetStr+"}");env.tabLevel--}}(require("./tree")),function(tree){tree.Alpha=function(val){this.value=val},tree.Alpha.prototype={type:"Alpha",accept:function(visitor){this.value=visitor.visit(this.value)},eval:function(env){return this.value.eval?new tree.Alpha(this.value.eval(env)):this},genCSS:function(env,output){output.add("alpha(opacity="),this.value.genCSS?this.value.genCSS(env,output):output.add(this.value),output.add(")")},toCSS:tree.toCSS}}(require("../tree")),function(tree){tree.Anonymous=function(value,index,currentFileInfo,mapLines,rulesetLike){this.value=value,this.index=index,this.mapLines=mapLines,this.currentFileInfo=currentFileInfo,this.rulesetLike="undefined"==typeof rulesetLike?!1:rulesetLike},tree.Anonymous.prototype={type:"Anonymous",eval:function(){return new tree.Anonymous(this.value,this.index,this.currentFileInfo,this.mapLines,this.rulesetLike)},compare:function(x){if(!x.toCSS)return-1;var left=this.toCSS(),right=x.toCSS();return left===right?0:right>left?-1:1},isRulesetLike:function(){return this.rulesetLike},genCSS:function(env,output){output.add(this.value,this.currentFileInfo,this.index,this.mapLines)},toCSS:tree.toCSS}}(require("../tree")),function(tree){tree.Assignment=function(key,val){this.key=key,this.value=val},tree.Assignment.prototype={type:"Assignment",accept:function(visitor){this.value=visitor.visit(this.value)},eval:function(env){return this.value.eval?new tree.Assignment(this.key,this.value.eval(env)):this},genCSS:function(env,output){output.add(this.key+"="),this.value.genCSS?this.value.genCSS(env,output):output.add(this.value)},toCSS:tree.toCSS}}(require("../tree")),function(tree){tree.Call=function(name,args,index,currentFileInfo){this.name=name,this.args=args,this.index=index,this.currentFileInfo=currentFileInfo},tree.Call.prototype={type:"Call",accept:function(visitor){this.args&&(this.args=visitor.visitArray(this.args))},eval:function(env){var result,func,args=this.args.map(function(a){return a.eval(env)}),nameLC=this.name.toLowerCase();if(nameLC in tree.functions)try{if(func=new tree.functionCall(env,this.currentFileInfo),result=func[nameLC].apply(func,args),null!=result)return result}catch(e){throw{type:e.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(e.message?": "+e.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new tree.Call(this.name,args,this.index,this.currentFileInfo)},genCSS:function(env,output){output.add(this.name+"(",this.currentFileInfo,this.index);for(var i=0;i<this.args.length;i++)this.args[i].genCSS(env,output),i+1<this.args.length&&output.add(", ");output.add(")")},toCSS:tree.toCSS}}(require("../tree")),function(tree){function toHex(v){return"#"+v.map(function(c){return c=clamp(Math.round(c),255),(16>c?"0":"")+c.toString(16)}).join("")}function clamp(v,max){return Math.min(Math.max(v,0),max)}tree.Color=function(rgb,a){this.rgb=Array.isArray(rgb)?rgb:6==rgb.length?rgb.match(/.{2}/g).map(function(c){return parseInt(c,16)}):rgb.split("").map(function(c){return parseInt(c+c,16)}),this.alpha="number"==typeof a?a:1};var transparentKeyword="transparent";tree.Color.prototype={type:"Color",eval:function(){return this},luma:function(){var r=this.rgb[0]/255,g=this.rgb[1]/255,b=this.rgb[2]/255;return r=.03928>=r?r/12.92:Math.pow((r+.055)/1.055,2.4),g=.03928>=g?g/12.92:Math.pow((g+.055)/1.055,2.4),b=.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4),.2126*r+.7152*g+.0722*b},genCSS:function(env,output){output.add(this.toCSS(env))},toCSS:function(env,doNotCompress){var compress=env&&env.compress&&!doNotCompress,alpha=tree.fround(env,this.alpha);if(1>alpha)return 0===alpha&&this.isTransparentKeyword?transparentKeyword:"rgba("+this.rgb.map(function(c){return clamp(Math.round(c),255)}).concat(clamp(alpha,1)).join(","+(compress?"":" "))+")";var color=this.toRGB();if(compress){var splitcolor=color.split("");splitcolor[1]===splitcolor[2]&&splitcolor[3]===splitcolor[4]&&splitcolor[5]===splitcolor[6]&&(color="#"+splitcolor[1]+splitcolor[3]+splitcolor[5])}return color},operate:function(env,op,other){for(var rgb=[],alpha=this.alpha*(1-other.alpha)+other.alpha,c=0;3>c;c++)rgb[c]=tree.operate(env,op,this.rgb[c],other.rgb[c]);return new tree.Color(rgb,alpha)},toRGB:function(){return toHex(this.rgb)},toHSL:function(){var h,s,r=this.rgb[0]/255,g=this.rgb[1]/255,b=this.rgb[2]/255,a=this.alpha,max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2,d=max-min;if(max===min)h=s=0;else{switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);
break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:360*h,s:s,l:l,a:a}},toHSV:function(){var h,s,r=this.rgb[0]/255,g=this.rgb[1]/255,b=this.rgb[2]/255,a=this.alpha,max=Math.max(r,g,b),min=Math.min(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max===min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:360*h,s:s,v:v,a:a}},toARGB:function(){return toHex([255*this.alpha].concat(this.rgb))},compare:function(x){return x.rgb&&x.rgb[0]===this.rgb[0]&&x.rgb[1]===this.rgb[1]&&x.rgb[2]===this.rgb[2]&&x.alpha===this.alpha?0:-1}},tree.Color.fromKeyword=function(keyword){if(keyword=keyword.toLowerCase(),tree.colors.hasOwnProperty(keyword))return new tree.Color(tree.colors[keyword].slice(1));if(keyword===transparentKeyword){var transparent=new tree.Color([0,0,0],0);return transparent.isTransparentKeyword=!0,transparent}}}(require("../tree")),function(tree){tree.Comment=function(value,silent,index,currentFileInfo){this.value=value,this.silent=!!silent,this.currentFileInfo=currentFileInfo},tree.Comment.prototype={type:"Comment",genCSS:function(env,output){this.debugInfo&&output.add(tree.debugInfo(env,this),this.currentFileInfo,this.index),output.add(this.value.trim())},toCSS:tree.toCSS,isSilent:function(env){var isReference=this.currentFileInfo&&this.currentFileInfo.reference&&!this.isReferenced,isCompressed=env.compress&&!this.value.match(/^\/\*!/);return this.silent||isReference||isCompressed},eval:function(){return this},markReferenced:function(){this.isReferenced=!0}}}(require("../tree")),function(tree){tree.Condition=function(op,l,r,i,negate){this.op=op.trim(),this.lvalue=l,this.rvalue=r,this.index=i,this.negate=negate},tree.Condition.prototype={type:"Condition",accept:function(visitor){this.lvalue=visitor.visit(this.lvalue),this.rvalue=visitor.visit(this.rvalue)},eval:function(env){var result,a=this.lvalue.eval(env),b=this.rvalue.eval(env),i=this.index;return result=function(op){switch(op){case"and":return a&&b;case"or":return a||b;default:if(a.compare)result=a.compare(b);else{if(!b.compare)throw{type:"Type",message:"Unable to perform comparison",index:i};result=b.compare(a)}switch(result){case-1:return"<"===op||"=<"===op||"<="===op;case 0:return"="===op||">="===op||"=<"===op||"<="===op;case 1:return">"===op||">="===op}}}(this.op),this.negate?!result:result}}}(require("../tree")),function(tree){tree.DetachedRuleset=function(ruleset,frames){this.ruleset=ruleset,this.frames=frames},tree.DetachedRuleset.prototype={type:"DetachedRuleset",accept:function(visitor){this.ruleset=visitor.visit(this.ruleset)},eval:function(env){var frames=this.frames||env.frames.slice(0);return new tree.DetachedRuleset(this.ruleset,frames)},callEval:function(env){return this.ruleset.eval(this.frames?new tree.evalEnv(env,this.frames.concat(env.frames)):env)}}}(require("../tree")),function(tree){tree.Dimension=function(value,unit){this.value=parseFloat(value),this.unit=unit&&unit instanceof tree.Unit?unit:new tree.Unit(unit?[unit]:undefined)},tree.Dimension.prototype={type:"Dimension",accept:function(visitor){this.unit=visitor.visit(this.unit)},eval:function(){return this},toColor:function(){return new tree.Color([this.value,this.value,this.value])},genCSS:function(env,output){if(env&&env.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var value=tree.fround(env,this.value),strValue=String(value);if(0!==value&&1e-6>value&&value>-1e-6&&(strValue=value.toFixed(20).replace(/0+$/,"")),env&&env.compress){if(0===value&&this.unit.isLength())return void output.add(strValue);value>0&&1>value&&(strValue=strValue.substr(1))}output.add(strValue),this.unit.genCSS(env,output)},toCSS:tree.toCSS,operate:function(env,op,other){var value=tree.operate(env,op,this.value,other.value),unit=this.unit.clone();if("+"===op||"-"===op)if(0===unit.numerator.length&&0===unit.denominator.length)unit.numerator=other.unit.numerator.slice(0),unit.denominator=other.unit.denominator.slice(0);else if(0===other.unit.numerator.length&&0===unit.denominator.length);else{if(other=other.convertTo(this.unit.usedUnits()),env.strictUnits&&other.unit.toString()!==unit.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+unit.toString()+"' and '"+other.unit.toString()+"'.");value=tree.operate(env,op,this.value,other.value)}else"*"===op?(unit.numerator=unit.numerator.concat(other.unit.numerator).sort(),unit.denominator=unit.denominator.concat(other.unit.denominator).sort(),unit.cancel()):"/"===op&&(unit.numerator=unit.numerator.concat(other.unit.denominator).sort(),unit.denominator=unit.denominator.concat(other.unit.numerator).sort(),unit.cancel());return new tree.Dimension(value,unit)},compare:function(other){if(other instanceof tree.Dimension){var a,b,aValue,bValue;if(this.unit.isEmpty()||other.unit.isEmpty())a=this,b=other;else if(a=this.unify(),b=other.unify(),0!==a.unit.compare(b.unit))return-1;return aValue=a.value,bValue=b.value,bValue>aValue?-1:aValue>bValue?1:0}return-1},unify:function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},convertTo:function(conversions){var i,groupName,group,targetUnit,applyUnit,value=this.value,unit=this.unit.clone(),derivedConversions={};if("string"==typeof conversions){for(i in tree.UnitConversions)tree.UnitConversions[i].hasOwnProperty(conversions)&&(derivedConversions={},derivedConversions[i]=conversions);conversions=derivedConversions}applyUnit=function(atomicUnit,denominator){return group.hasOwnProperty(atomicUnit)?(denominator?value/=group[atomicUnit]/group[targetUnit]:value*=group[atomicUnit]/group[targetUnit],targetUnit):atomicUnit};for(groupName in conversions)conversions.hasOwnProperty(groupName)&&(targetUnit=conversions[groupName],group=tree.UnitConversions[groupName],unit.map(applyUnit));return unit.cancel(),new tree.Dimension(value,unit)}},tree.UnitConversions={length:{m:1,cm:.01,mm:.001,"in":.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}},tree.Unit=function(numerator,denominator,backupUnit){this.numerator=numerator?numerator.slice(0).sort():[],this.denominator=denominator?denominator.slice(0).sort():[],this.backupUnit=backupUnit},tree.Unit.prototype={type:"Unit",clone:function(){return new tree.Unit(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},genCSS:function(env,output){this.numerator.length>=1?output.add(this.numerator[0]):this.denominator.length>=1?output.add(this.denominator[0]):env&&env.strictUnits||!this.backupUnit||output.add(this.backupUnit)},toCSS:tree.toCSS,toString:function(){var i,returnStr=this.numerator.join("*");for(i=0;i<this.denominator.length;i++)returnStr+="/"+this.denominator[i];return returnStr},compare:function(other){return this.is(other.toString())?0:-1},is:function(unitString){return this.toString()===unitString},isLength:function(){return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/))},isEmpty:function(){return 0===this.numerator.length&&0===this.denominator.length},isSingular:function(){return this.numerator.length<=1&&0===this.denominator.length},map:function(callback){var i;for(i=0;i<this.numerator.length;i++)this.numerator[i]=callback(this.numerator[i],!1);for(i=0;i<this.denominator.length;i++)this.denominator[i]=callback(this.denominator[i],!0)},usedUnits:function(){var group,mapUnit,result={};mapUnit=function(atomicUnit){return group.hasOwnProperty(atomicUnit)&&!result[groupName]&&(result[groupName]=atomicUnit),atomicUnit};for(var groupName in tree.UnitConversions)tree.UnitConversions.hasOwnProperty(groupName)&&(group=tree.UnitConversions[groupName],this.map(mapUnit));return result},cancel:function(){var atomicUnit,i,backup,counter={};for(i=0;i<this.numerator.length;i++)atomicUnit=this.numerator[i],backup||(backup=atomicUnit),counter[atomicUnit]=(counter[atomicUnit]||0)+1;for(i=0;i<this.denominator.length;i++)atomicUnit=this.denominator[i],backup||(backup=atomicUnit),counter[atomicUnit]=(counter[atomicUnit]||0)-1;this.numerator=[],this.denominator=[];for(atomicUnit in counter)if(counter.hasOwnProperty(atomicUnit)){var count=counter[atomicUnit];if(count>0)for(i=0;count>i;i++)this.numerator.push(atomicUnit);else if(0>count)for(i=0;-count>i;i++)this.denominator.push(atomicUnit)}0===this.numerator.length&&0===this.denominator.length&&backup&&(this.backupUnit=backup),this.numerator.sort(),this.denominator.sort()}}}(require("../tree")),function(tree){tree.Directive=function(name,value,rules,index,currentFileInfo,debugInfo){this.name=name,this.value=value,rules&&(this.rules=rules,this.rules.allowImports=!0),this.index=index,this.currentFileInfo=currentFileInfo,this.debugInfo=debugInfo},tree.Directive.prototype={type:"Directive",accept:function(visitor){var value=this.value,rules=this.rules;rules&&(rules=visitor.visit(rules)),value&&(value=visitor.visit(value))},isRulesetLike:function(){return"@charset"!==this.name},genCSS:function(env,output){var value=this.value,rules=this.rules;output.add(this.name,this.currentFileInfo,this.index),value&&(output.add(" "),value.genCSS(env,output)),rules?tree.outputRuleset(env,output,[rules]):output.add(";")},toCSS:tree.toCSS,eval:function(env){var value=this.value,rules=this.rules;return value&&(value=value.eval(env)),rules&&(rules=rules.eval(env),rules.root=!0),new tree.Directive(this.name,value,rules,this.index,this.currentFileInfo,this.debugInfo)},variable:function(name){return this.rules?tree.Ruleset.prototype.variable.call(this.rules,name):void 0},find:function(){return this.rules?tree.Ruleset.prototype.find.apply(this.rules,arguments):void 0},rulesets:function(){return this.rules?tree.Ruleset.prototype.rulesets.apply(this.rules):void 0},markReferenced:function(){var i,rules;if(this.isReferenced=!0,this.rules)for(rules=this.rules.rules,i=0;i<rules.length;i++)rules[i].markReferenced&&rules[i].markReferenced()}}}(require("../tree")),function(tree){tree.Element=function(combinator,value,index,currentFileInfo){this.combinator=combinator instanceof tree.Combinator?combinator:new tree.Combinator(combinator),this.value="string"==typeof value?value.trim():value?value:"",this.index=index,this.currentFileInfo=currentFileInfo},tree.Element.prototype={type:"Element",accept:function(visitor){var value=this.value;this.combinator=visitor.visit(this.combinator),"object"==typeof value&&(this.value=visitor.visit(value))},eval:function(env){return new tree.Element(this.combinator,this.value.eval?this.value.eval(env):this.value,this.index,this.currentFileInfo)},genCSS:function(env,output){output.add(this.toCSS(env),this.currentFileInfo,this.index)},toCSS:function(env){var value=this.value.toCSS?this.value.toCSS(env):this.value;return""===value&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(env||{})+value}},tree.Attribute=function(key,op,value){this.key=key,this.op=op,this.value=value},tree.Attribute.prototype={type:"Attribute",eval:function(env){return new tree.Attribute(this.key.eval?this.key.eval(env):this.key,this.op,this.value&&this.value.eval?this.value.eval(env):this.value)},genCSS:function(env,output){output.add(this.toCSS(env))},toCSS:function(env){var value=this.key.toCSS?this.key.toCSS(env):this.key;return this.op&&(value+=this.op,value+=this.value.toCSS?this.value.toCSS(env):this.value),"["+value+"]"}},tree.Combinator=function(value){this.value=" "===value?" ":value?value.trim():""},tree.Combinator.prototype={type:"Combinator",_outputMap:{"":""," ":" ",":":" :","+":" + ","~":" ~ ",">":" > ","|":"|","^":" ^ ","^^":" ^^ "},_outputMapCompressed:{"":""," ":" ",":":" :","+":"+","~":"~",">":">","|":"|","^":"^","^^":"^^"},genCSS:function(env,output){output.add((env.compress?this._outputMapCompressed:this._outputMap)[this.value])},toCSS:tree.toCSS}}(require("../tree")),function(tree){tree.Expression=function(value){this.value=value},tree.Expression.prototype={type:"Expression",accept:function(visitor){this.value&&(this.value=visitor.visitArray(this.value))},eval:function(env){var returnValue,inParenthesis=this.parens&&!this.parensInOp,doubleParen=!1;return inParenthesis&&env.inParenthesis(),this.value.length>1?returnValue=new tree.Expression(this.value.map(function(e){return e.eval(env)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(doubleParen=!0),returnValue=this.value[0].eval(env)):returnValue=this,inParenthesis&&env.outOfParenthesis(),this.parens&&this.parensInOp&&!env.isMathOn()&&!doubleParen&&(returnValue=new tree.Paren(returnValue)),returnValue},genCSS:function(env,output){for(var i=0;i<this.value.length;i++)this.value[i].genCSS(env,output),i+1<this.value.length&&output.add(" ")},toCSS:tree.toCSS,throwAwayComments:function(){this.value=this.value.filter(function(v){return!(v instanceof tree.Comment)})}}}(require("../tree")),function(tree){tree.Extend=function(selector,option,index){switch(this.selector=selector,this.option=option,this.index=index,this.object_id=tree.Extend.next_id++,this.parent_ids=[this.object_id],option){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}},tree.Extend.next_id=0,tree.Extend.prototype={type:"Extend",accept:function(visitor){this.selector=visitor.visit(this.selector)},eval:function(env){return new tree.Extend(this.selector.eval(env),this.option,this.index)},clone:function(){return new tree.Extend(this.selector,this.option,this.index)},findSelfSelectors:function(selectors){var i,selectorElements,selfElements=[];for(i=0;i<selectors.length;i++)selectorElements=selectors[i].elements,i>0&&selectorElements.length&&""===selectorElements[0].combinator.value&&(selectorElements[0].combinator.value=" "),selfElements=selfElements.concat(selectors[i].elements);this.selfSelectors=[{elements:selfElements}]}}}(require("../tree")),function(tree){tree.Import=function(path,features,options,index,currentFileInfo){if(this.options=options,this.index=index,this.path=path,this.features=features,this.currentFileInfo=currentFileInfo,this.options.less!==undefined||this.options.inline)this.css=!this.options.less||this.options.inline;else{var pathValue=this.getPath();pathValue&&/css([\?;].*)?$/.test(pathValue)&&(this.css=!0)}},tree.Import.prototype={type:"Import",accept:function(visitor){this.features&&(this.features=visitor.visit(this.features)),this.path=visitor.visit(this.path),!this.options.inline&&this.root&&(this.root=visitor.visit(this.root))},genCSS:function(env,output){this.css&&(output.add("@import ",this.currentFileInfo,this.index),this.path.genCSS(env,output),this.features&&(output.add(" "),this.features.genCSS(env,output)),output.add(";"))},toCSS:tree.toCSS,getPath:function(){if(this.path instanceof tree.Quoted){var path=this.path.value;return this.css!==undefined||/(\.[a-z]*$)|([\?;].*)$/.test(path)?path:path+".less"}return this.path instanceof tree.URL?this.path.value.value:null},evalForImport:function(env){return new tree.Import(this.path.eval(env),this.features,this.options,this.index,this.currentFileInfo)},evalPath:function(env){var path=this.path.eval(env),rootpath=this.currentFileInfo&&this.currentFileInfo.rootpath;if(!(path instanceof tree.URL)){if(rootpath){var pathValue=path.value;pathValue&&env.isPathRelative(pathValue)&&(path.value=rootpath+pathValue)}path.value=env.normalizePath(path.value)}return path},eval:function(env){var ruleset,features=this.features&&this.features.eval(env);if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var contents=new tree.Anonymous(this.root,0,{filename:this.importedFilename},!0,!0);return this.features?new tree.Media([contents],this.features.value):[contents]}if(this.css){var newImport=new tree.Import(this.evalPath(env),features,this.options,this.index);if(!newImport.css&&this.error)throw this.error;return newImport}return ruleset=new tree.Ruleset(null,this.root.rules.slice(0)),ruleset.evalImports(env),this.features?new tree.Media(ruleset.rules,this.features.value):ruleset.rules}}}(require("../tree")),function(tree){tree.JavaScript=function(string,index,escaped){this.escaped=escaped,this.expression=string,this.index=index},tree.JavaScript.prototype={type:"JavaScript",eval:function(env){var result,that=this,context={},expression=this.expression.replace(/@\{([\w-]+)\}/g,function(_,name){return tree.jsify(new tree.Variable("@"+name,that.index).eval(env))});try{expression=new Function("return ("+expression+")")}catch(e){throw{message:"JavaScript evaluation error: "+e.message+" from `"+expression+"`",index:this.index}}var variables=env.frames[0].variables();for(var k in variables)variables.hasOwnProperty(k)&&(context[k.slice(1)]={value:variables[k].value,toJS:function(){return this.value.eval(env).toCSS()}});try{result=expression.call(context)}catch(e){throw{message:"JavaScript evaluation error: '"+e.name+": "+e.message.replace(/["]/g,"'")+"'",index:this.index}}return"number"==typeof result?new tree.Dimension(result):"string"==typeof result?new tree.Quoted('"'+result+'"',result,this.escaped,this.index):new tree.Anonymous(Array.isArray(result)?result.join(", "):result)}}}(require("../tree")),function(tree){tree.Keyword=function(value){this.value=value},tree.Keyword.prototype={type:"Keyword",eval:function(){return this},genCSS:function(env,output){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};output.add(this.value)},toCSS:tree.toCSS,compare:function(other){return other instanceof tree.Keyword?other.value===this.value?0:1:-1}},tree.True=new tree.Keyword("true"),tree.False=new tree.Keyword("false")}(require("../tree")),function(tree){tree.Media=function(value,features,index,currentFileInfo){this.index=index,this.currentFileInfo=currentFileInfo;var selectors=this.emptySelectors();this.features=new tree.Value(features),this.rules=[new tree.Ruleset(selectors,value)],this.rules[0].allowImports=!0},tree.Media.prototype={type:"Media",accept:function(visitor){this.features&&(this.features=visitor.visit(this.features)),this.rules&&(this.rules=visitor.visitArray(this.rules))},genCSS:function(env,output){output.add("@media ",this.currentFileInfo,this.index),this.features.genCSS(env,output),tree.outputRuleset(env,output,this.rules)},toCSS:tree.toCSS,eval:function(env){env.mediaBlocks||(env.mediaBlocks=[],env.mediaPath=[]);var media=new tree.Media(null,[],this.index,this.currentFileInfo);this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,media.debugInfo=this.debugInfo);var strictMathBypass=!1;env.strictMath||(strictMathBypass=!0,env.strictMath=!0);try{media.features=this.features.eval(env)}finally{strictMathBypass&&(env.strictMath=!1)}return env.mediaPath.push(media),env.mediaBlocks.push(media),env.frames.unshift(this.rules[0]),media.rules=[this.rules[0].eval(env)],env.frames.shift(),env.mediaPath.pop(),0===env.mediaPath.length?media.evalTop(env):media.evalNested(env)},variable:function(name){return tree.Ruleset.prototype.variable.call(this.rules[0],name)},find:function(){return tree.Ruleset.prototype.find.apply(this.rules[0],arguments)},rulesets:function(){return tree.Ruleset.prototype.rulesets.apply(this.rules[0])},emptySelectors:function(){var el=new tree.Element("","&",this.index,this.currentFileInfo),sels=[new tree.Selector([el],null,null,this.index,this.currentFileInfo)];return sels[0].mediaEmpty=!0,sels},markReferenced:function(){var i,rules=this.rules[0].rules;for(this.rules[0].markReferenced(),this.isReferenced=!0,i=0;i<rules.length;i++)rules[i].markReferenced&&rules[i].markReferenced()},evalTop:function(env){var result=this;if(env.mediaBlocks.length>1){var selectors=this.emptySelectors();result=new tree.Ruleset(selectors,env.mediaBlocks),result.multiMedia=!0}return delete env.mediaBlocks,delete env.mediaPath,result},evalNested:function(env){var i,value,path=env.mediaPath.concat([this]);for(i=0;i<path.length;i++)value=path[i].features instanceof tree.Value?path[i].features.value:path[i].features,path[i]=Array.isArray(value)?value:[value];return this.features=new tree.Value(this.permute(path).map(function(path){for(path=path.map(function(fragment){return fragment.toCSS?fragment:new tree.Anonymous(fragment)}),i=path.length-1;i>0;i--)path.splice(i,0,new tree.Anonymous("and"));return new tree.Expression(path)})),new tree.Ruleset([],[])},permute:function(arr){if(0===arr.length)return[];if(1===arr.length)return arr[0];for(var result=[],rest=this.permute(arr.slice(1)),i=0;i<rest.length;i++)for(var j=0;j<arr[0].length;j++)result.push([arr[0][j]].concat(rest[i]));return result},bubbleSelectors:function(selectors){selectors&&(this.rules=[new tree.Ruleset(selectors.slice(0),[this.rules[0]])])}}}(require("../tree")),function(tree){tree.mixin={},tree.mixin.Call=function(elements,args,index,currentFileInfo,important){this.selector=new tree.Selector(elements),this.arguments=args&&args.length?args:null,this.index=index,this.currentFileInfo=currentFileInfo,this.important=important},tree.mixin.Call.prototype={type:"MixinCall",accept:function(visitor){this.selector&&(this.selector=visitor.visit(this.selector)),this.arguments&&(this.arguments=visitor.visitArray(this.arguments))},eval:function(env){var mixins,mixin,args,i,m,f,isRecursive,isOneFound,rule,candidate,defaultResult,count,originalRuleset,rules=[],match=!1,candidates=[],conditionResult=[],defaultFunc=tree.defaultFunc,defNone=0,defTrue=1,defFalse=2;for(args=this.arguments&&this.arguments.map(function(a){return{name:a.name,value:a.value.eval(env)}}),i=0;i<env.frames.length;i++)if((mixins=env.frames[i].find(this.selector)).length>0){for(isOneFound=!0,m=0;m<mixins.length;m++){for(mixin=mixins[m],isRecursive=!1,f=0;f<env.frames.length;f++)if(!(mixin instanceof tree.mixin.Definition)&&mixin===(env.frames[f].originalRuleset||env.frames[f])){isRecursive=!0;break}if(!isRecursive&&mixin.matchArgs(args,env)){if(candidate={mixin:mixin,group:defNone},mixin.matchCondition){for(f=0;2>f;f++)defaultFunc.value(f),conditionResult[f]=mixin.matchCondition(args,env);(conditionResult[0]||conditionResult[1])&&(conditionResult[0]!=conditionResult[1]&&(candidate.group=conditionResult[1]?defTrue:defFalse),candidates.push(candidate))}else candidates.push(candidate);match=!0}}for(defaultFunc.reset(),count=[0,0,0],m=0;m<candidates.length;m++)count[candidates[m].group]++;if(count[defNone]>0)defaultResult=defFalse;else if(defaultResult=defTrue,count[defTrue]+count[defFalse]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(args)+"`",index:this.index,filename:this.currentFileInfo.filename};for(m=0;m<candidates.length;m++)if(candidate=candidates[m].group,candidate===defNone||candidate===defaultResult)try{mixin=candidates[m].mixin,mixin instanceof tree.mixin.Definition||(originalRuleset=mixin.originalRuleset||mixin,mixin=new tree.mixin.Definition("",[],mixin.rules,null,!1),mixin.originalRuleset=originalRuleset),Array.prototype.push.apply(rules,mixin.evalCall(env,args,this.important).rules)}catch(e){throw{message:e.message,index:this.index,filename:this.currentFileInfo.filename,stack:e.stack}}if(match){if(!this.currentFileInfo||!this.currentFileInfo.reference)for(i=0;i<rules.length;i++)rule=rules[i],rule.markReferenced&&rule.markReferenced();return rules}}throw isOneFound?{type:"Runtime",message:"No matching definition was found for `"+this.format(args)+"`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}},format:function(args){return this.selector.toCSS().trim()+"("+(args?args.map(function(a){var argValue="";return a.name&&(argValue+=a.name+":"),argValue+=a.value.toCSS?a.value.toCSS():"???"}).join(", "):"")+")"}},tree.mixin.Definition=function(name,params,rules,condition,variadic,frames){this.name=name,this.selectors=[new tree.Selector([new tree.Element(null,name,this.index,this.currentFileInfo)])],this.params=params,this.condition=condition,this.variadic=variadic,this.arity=params.length,this.rules=rules,this._lookups={},this.required=params.reduce(function(count,p){return!p.name||p.name&&!p.value?count+1:count},0),this.parent=tree.Ruleset.prototype,this.frames=frames},tree.mixin.Definition.prototype={type:"MixinDefinition",accept:function(visitor){this.params&&this.params.length&&(this.params=visitor.visitArray(this.params)),this.rules=visitor.visitArray(this.rules),this.condition&&(this.condition=visitor.visit(this.condition))},variable:function(name){return this.parent.variable.call(this,name)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(env,mixinEnv,args,evaldArguments){var varargs,arg,i,j,val,name,isNamedFound,argIndex,frame=new tree.Ruleset(null,null),params=this.params.slice(0),argsLength=0;if(mixinEnv=new tree.evalEnv(mixinEnv,[frame].concat(mixinEnv.frames)),args)for(args=args.slice(0),argsLength=args.length,i=0;argsLength>i;i++)if(arg=args[i],name=arg&&arg.name){for(isNamedFound=!1,j=0;j<params.length;j++)if(!evaldArguments[j]&&name===params[j].name){evaldArguments[j]=arg.value.eval(env),frame.prependRule(new tree.Rule(name,arg.value.eval(env))),isNamedFound=!0;break}if(isNamedFound){args.splice(i,1),i--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+args[i].name+" not found"}}for(argIndex=0,i=0;i<params.length;i++)if(!evaldArguments[i]){if(arg=args&&args[argIndex],name=params[i].name)if(params[i].variadic){for(varargs=[],j=argIndex;argsLength>j;j++)varargs.push(args[j].value.eval(env));frame.prependRule(new tree.Rule(name,new tree.Expression(varargs).eval(env)))}else{if(val=arg&&arg.value)val=val.eval(env);else{if(!params[i].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+argsLength+" for "+this.arity+")"};val=params[i].value.eval(mixinEnv),frame.resetCache()}frame.prependRule(new tree.Rule(name,val)),evaldArguments[i]=val}if(params[i].variadic&&args)for(j=argIndex;argsLength>j;j++)evaldArguments[j]=args[j].value.eval(env);argIndex++}return frame},eval:function(env){return new tree.mixin.Definition(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||env.frames.slice(0))},evalCall:function(env,args,important){var rules,ruleset,_arguments=[],mixinFrames=this.frames?this.frames.concat(env.frames):env.frames,frame=this.evalParams(env,new tree.evalEnv(env,mixinFrames),args,_arguments);return frame.prependRule(new tree.Rule("@arguments",new tree.Expression(_arguments).eval(env))),rules=this.rules.slice(0),ruleset=new tree.Ruleset(null,rules),ruleset.originalRuleset=this,ruleset=ruleset.eval(new tree.evalEnv(env,[this,frame].concat(mixinFrames))),important&&(ruleset=this.parent.makeImportant.apply(ruleset)),ruleset},matchCondition:function(args,env){return this.condition&&!this.condition.eval(new tree.evalEnv(env,[this.evalParams(env,new tree.evalEnv(env,this.frames?this.frames.concat(env.frames):env.frames),args,[])].concat(this.frames).concat(env.frames)))?!1:!0},matchArgs:function(args,env){var len,argsLength=args&&args.length||0;if(this.variadic){if(argsLength<this.required-1)return!1}else{if(argsLength<this.required)return!1;if(argsLength>this.params.length)return!1}len=Math.min(argsLength,this.arity);for(var i=0;len>i;i++)if(!this.params[i].name&&!this.params[i].variadic&&args[i].value.eval(env).toCSS()!=this.params[i].value.eval(env).toCSS())return!1;return!0}}}(require("../tree")),function(tree){tree.Negative=function(node){this.value=node},tree.Negative.prototype={type:"Negative",accept:function(visitor){this.value=visitor.visit(this.value)},genCSS:function(env,output){output.add("-"),this.value.genCSS(env,output)},toCSS:tree.toCSS,eval:function(env){return env.isMathOn()?new tree.Operation("*",[new tree.Dimension(-1),this.value]).eval(env):new tree.Negative(this.value.eval(env))}}}(require("../tree")),function(tree){tree.Operation=function(op,operands,isSpaced){this.op=op.trim(),this.operands=operands,this.isSpaced=isSpaced},tree.Operation.prototype={type:"Operation",accept:function(visitor){this.operands=visitor.visit(this.operands)},eval:function(env){var a=this.operands[0].eval(env),b=this.operands[1].eval(env);if(env.isMathOn()){if(a instanceof tree.Dimension&&b instanceof tree.Color&&(a=a.toColor()),b instanceof tree.Dimension&&a instanceof tree.Color&&(b=b.toColor()),!a.operate)throw{type:"Operation",message:"Operation on an invalid type"};return a.operate(env,this.op,b)}return new tree.Operation(this.op,[a,b],this.isSpaced)},genCSS:function(env,output){this.operands[0].genCSS(env,output),this.isSpaced&&output.add(" "),output.add(this.op),this.isSpaced&&output.add(" "),this.operands[1].genCSS(env,output)},toCSS:tree.toCSS},tree.operate=function(env,op,a,b){switch(op){case"+":return a+b;case"-":return a-b;case"*":return a*b;case"/":return a/b}}}(require("../tree")),function(tree){tree.Paren=function(node){this.value=node},tree.Paren.prototype={type:"Paren",accept:function(visitor){this.value=visitor.visit(this.value)},genCSS:function(env,output){output.add("("),this.value.genCSS(env,output),output.add(")")},toCSS:tree.toCSS,eval:function(env){return new tree.Paren(this.value.eval(env))}}}(require("../tree")),function(tree){tree.Quoted=function(str,content,escaped,index,currentFileInfo){this.escaped=escaped,this.value=content||"",this.quote=str.charAt(0),this.index=index,this.currentFileInfo=currentFileInfo},tree.Quoted.prototype={type:"Quoted",genCSS:function(env,output){this.escaped||output.add(this.quote,this.currentFileInfo,this.index),output.add(this.value),this.escaped||output.add(this.quote)},toCSS:tree.toCSS,eval:function(env){var that=this,value=this.value.replace(/`([^`]+)`/g,function(_,exp){return new tree.JavaScript(exp,that.index,!0).eval(env).value}).replace(/@\{([\w-]+)\}/g,function(_,name){var v=new tree.Variable("@"+name,that.index,that.currentFileInfo).eval(env,!0);return v instanceof tree.Quoted?v.value:v.toCSS()});return new tree.Quoted(this.quote+value+this.quote,value,this.escaped,this.index,this.currentFileInfo)},compare:function(x){if(!x.toCSS)return-1;var left,right;return"Quoted"!==x.type||this.escaped||x.escaped?(left=this.toCSS(),right=x.toCSS()):(left=x.value,right=this.value),left===right?0:right>left?-1:1}}}(require("../tree")),function(tree){function evalName(env,name){var i,value="",n=name.length,output={add:function(s){value+=s}};for(i=0;n>i;i++)name[i].eval(env).genCSS(env,output);return value}tree.Rule=function(name,value,important,merge,index,currentFileInfo,inline){this.name=name,this.value=value instanceof tree.Value||value instanceof tree.Ruleset?value:new tree.Value([value]),this.important=important?" "+important.trim():"",this.merge=merge,this.index=index,this.currentFileInfo=currentFileInfo,this.inline=inline||!1,this.variable=name.charAt&&"@"===name.charAt(0)},tree.Rule.prototype={type:"Rule",accept:function(visitor){this.value=visitor.visit(this.value)},genCSS:function(env,output){output.add(this.name+(env.compress?":":": "),this.currentFileInfo,this.index);try{this.value.genCSS(env,output)}catch(e){throw e.index=this.index,e.filename=this.currentFileInfo.filename,e}output.add(this.important+(this.inline||env.lastRule&&env.compress?"":";"),this.currentFileInfo,this.index)},toCSS:tree.toCSS,eval:function(env){var evaldValue,strictMathBypass=!1,name=this.name;"string"!=typeof name&&(name=1===name.length&&name[0]instanceof tree.Keyword?name[0].value:evalName(env,name)),"font"!==name||env.strictMath||(strictMathBypass=!0,env.strictMath=!0);try{if(evaldValue=this.value.eval(env),!this.variable&&"DetachedRuleset"===evaldValue.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.index,filename:this.currentFileInfo.filename};return new tree.Rule(name,evaldValue,this.important,this.merge,this.index,this.currentFileInfo,this.inline)}catch(e){throw"number"!=typeof e.index&&(e.index=this.index,e.filename=this.currentFileInfo.filename),e
}finally{strictMathBypass&&(env.strictMath=!1)}},makeImportant:function(){return new tree.Rule(this.name,this.value,"!important",this.merge,this.index,this.currentFileInfo,this.inline)}}}(require("../tree")),function(tree){tree.RulesetCall=function(variable){this.variable=variable},tree.RulesetCall.prototype={type:"RulesetCall",accept:function(){},eval:function(env){var detachedRuleset=new tree.Variable(this.variable).eval(env);return detachedRuleset.callEval(env)}}}(require("../tree")),function(tree){tree.Ruleset=function(selectors,rules,strictImports){this.selectors=selectors,this.rules=rules,this._lookups={},this.strictImports=strictImports},tree.Ruleset.prototype={type:"Ruleset",accept:function(visitor){this.paths?visitor.visitArray(this.paths,!0):this.selectors&&(this.selectors=visitor.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=visitor.visitArray(this.rules))},eval:function(env){var selectors,selCnt,selector,i,thisSelectors=this.selectors,defaultFunc=tree.defaultFunc,hasOnePassingSelector=!1;if(thisSelectors&&(selCnt=thisSelectors.length)){for(selectors=[],defaultFunc.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),i=0;selCnt>i;i++)selector=thisSelectors[i].eval(env),selectors.push(selector),selector.evaldCondition&&(hasOnePassingSelector=!0);defaultFunc.reset()}else hasOnePassingSelector=!0;var rule,subRule,rules=this.rules?this.rules.slice(0):null,ruleset=new tree.Ruleset(selectors,rules,this.strictImports);ruleset.originalRuleset=this,ruleset.root=this.root,ruleset.firstRoot=this.firstRoot,ruleset.allowImports=this.allowImports,this.debugInfo&&(ruleset.debugInfo=this.debugInfo),hasOnePassingSelector||(rules.length=0);var envFrames=env.frames;envFrames.unshift(ruleset);var envSelectors=env.selectors;envSelectors||(env.selectors=envSelectors=[]),envSelectors.unshift(this.selectors),(ruleset.root||ruleset.allowImports||!ruleset.strictImports)&&ruleset.evalImports(env);var rsRules=ruleset.rules,rsRuleCnt=rsRules?rsRules.length:0;for(i=0;rsRuleCnt>i;i++)(rsRules[i]instanceof tree.mixin.Definition||rsRules[i]instanceof tree.DetachedRuleset)&&(rsRules[i]=rsRules[i].eval(env));var mediaBlockCount=env.mediaBlocks&&env.mediaBlocks.length||0;for(i=0;rsRuleCnt>i;i++)rsRules[i]instanceof tree.mixin.Call?(rules=rsRules[i].eval(env).filter(function(r){return r instanceof tree.Rule&&r.variable?!ruleset.variable(r.name):!0}),rsRules.splice.apply(rsRules,[i,1].concat(rules)),rsRuleCnt+=rules.length-1,i+=rules.length-1,ruleset.resetCache()):rsRules[i]instanceof tree.RulesetCall&&(rules=rsRules[i].eval(env).rules.filter(function(r){return r instanceof tree.Rule&&r.variable?!1:!0}),rsRules.splice.apply(rsRules,[i,1].concat(rules)),rsRuleCnt+=rules.length-1,i+=rules.length-1,ruleset.resetCache());for(i=0;i<rsRules.length;i++)rule=rsRules[i],rule instanceof tree.mixin.Definition||rule instanceof tree.DetachedRuleset||(rsRules[i]=rule=rule.eval?rule.eval(env):rule);for(i=0;i<rsRules.length;i++)if(rule=rsRules[i],rule instanceof tree.Ruleset&&rule.selectors&&1===rule.selectors.length&&rule.selectors[0].isJustParentSelector()){rsRules.splice(i--,1);for(var j=0;j<rule.rules.length;j++)subRule=rule.rules[j],subRule instanceof tree.Rule&&subRule.variable||rsRules.splice(++i,0,subRule)}if(envFrames.shift(),envSelectors.shift(),env.mediaBlocks)for(i=mediaBlockCount;i<env.mediaBlocks.length;i++)env.mediaBlocks[i].bubbleSelectors(selectors);return ruleset},evalImports:function(env){var i,importRules,rules=this.rules;if(rules)for(i=0;i<rules.length;i++)rules[i]instanceof tree.Import&&(importRules=rules[i].eval(env),importRules&&importRules.length?(rules.splice.apply(rules,[i,1].concat(importRules)),i+=importRules.length-1):rules.splice(i,1,importRules),this.resetCache())},makeImportant:function(){return new tree.Ruleset(this.selectors,this.rules.map(function(r){return r.makeImportant?r.makeImportant():r}),this.strictImports)},matchArgs:function(args){return!args||0===args.length},matchCondition:function(args,env){var lastSelector=this.selectors[this.selectors.length-1];return lastSelector.evaldCondition?lastSelector.condition&&!lastSelector.condition.eval(new tree.evalEnv(env,env.frames))?!1:!0:!1},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(hash,r){return r instanceof tree.Rule&&r.variable===!0&&(hash[r.name]=r),hash},{}):{}),this._variables},variable:function(name){return this.variables()[name]},rulesets:function(){if(!this.rules)return null;var i,rule,_Ruleset=tree.Ruleset,_MixinDefinition=tree.mixin.Definition,filtRules=[],rules=this.rules,cnt=rules.length;for(i=0;cnt>i;i++)rule=rules[i],(rule instanceof _Ruleset||rule instanceof _MixinDefinition)&&filtRules.push(rule);return filtRules},prependRule:function(rule){var rules=this.rules;rules?rules.unshift(rule):this.rules=[rule]},find:function(selector,self){self=self||this;var match,rules=[],key=selector.toCSS();return key in this._lookups?this._lookups[key]:(this.rulesets().forEach(function(rule){if(rule!==self)for(var j=0;j<rule.selectors.length;j++)if(match=selector.match(rule.selectors[j])){selector.elements.length>match?Array.prototype.push.apply(rules,rule.find(new tree.Selector(selector.elements.slice(match)),self)):rules.push(rule);break}}),this._lookups[key]=rules,rules)},genCSS:function(env,output){function isRulesetLikeNode(rule,root){return rule.rules?!0:rule instanceof tree.Media||root&&rule instanceof tree.Comment?!0:rule instanceof tree.Directive||rule instanceof tree.Anonymous?rule.isRulesetLike():!1}var i,j,rulesetNodeCnt,debugInfo,rule,path,ruleNodes=[],rulesetNodes=[];env.tabLevel=env.tabLevel||0,this.root||env.tabLevel++;var sep,tabRuleStr=env.compress?"":Array(env.tabLevel+1).join("  "),tabSetStr=env.compress?"":Array(env.tabLevel).join("  ");for(i=0;i<this.rules.length;i++)rule=this.rules[i],isRulesetLikeNode(rule,this.root)?rulesetNodes.push(rule):ruleNodes.push(rule);if(!this.root){debugInfo=tree.debugInfo(env,this,tabSetStr),debugInfo&&(output.add(debugInfo),output.add(tabSetStr));var pathSubCnt,paths=this.paths,pathCnt=paths.length;for(sep=env.compress?",":",\n"+tabSetStr,i=0;pathCnt>i;i++)if(path=paths[i],pathSubCnt=path.length)for(i>0&&output.add(sep),env.firstSelector=!0,path[0].genCSS(env,output),env.firstSelector=!1,j=1;pathSubCnt>j;j++)path[j].genCSS(env,output);output.add((env.compress?"{":" {\n")+tabRuleStr)}for(i=0;i<ruleNodes.length;i++)rule=ruleNodes[i],i+1!==ruleNodes.length||this.root&&0!==rulesetNodes.length&&!this.firstRoot||(env.lastRule=!0),rule.genCSS?rule.genCSS(env,output):rule.value&&output.add(rule.value.toString()),env.lastRule?env.lastRule=!1:output.add(env.compress?"":"\n"+tabRuleStr);if(this.root||(output.add(env.compress?"}":"\n"+tabSetStr+"}"),env.tabLevel--),sep=(env.compress?"":"\n")+(this.root?tabRuleStr:tabSetStr),rulesetNodeCnt=rulesetNodes.length)for(ruleNodes.length&&sep&&output.add(sep),rulesetNodes[0].genCSS(env,output),i=1;rulesetNodeCnt>i;i++)sep&&output.add(sep),rulesetNodes[i].genCSS(env,output);output.isEmpty()||env.compress||!this.firstRoot||output.add("\n")},toCSS:tree.toCSS,markReferenced:function(){if(this.selectors)for(var s=0;s<this.selectors.length;s++)this.selectors[s].markReferenced()},joinSelectors:function(paths,context,selectors){for(var s=0;s<selectors.length;s++)this.joinSelector(paths,context,selectors[s])},joinSelector:function(paths,context,selector){var i,j,k,hasParentSelector,newSelectors,el,sel,parentSel,newSelectorPath,afterParentJoin,newJoinedSelector,newJoinedSelectorEmpty,lastSelector,currentElements,selectorsMultiplied;for(i=0;i<selector.elements.length;i++)el=selector.elements[i],"&"===el.value&&(hasParentSelector=!0);if(hasParentSelector){for(currentElements=[],newSelectors=[[]],i=0;i<selector.elements.length;i++)if(el=selector.elements[i],"&"!==el.value)currentElements.push(el);else{for(selectorsMultiplied=[],currentElements.length>0&&this.mergeElementsOnToSelectors(currentElements,newSelectors),j=0;j<newSelectors.length;j++)if(sel=newSelectors[j],0===context.length)sel.length>0&&(sel[0].elements=sel[0].elements.slice(0),sel[0].elements.push(new tree.Element(el.combinator,"",el.index,el.currentFileInfo))),selectorsMultiplied.push(sel);else for(k=0;k<context.length;k++)parentSel=context[k],newSelectorPath=[],afterParentJoin=[],newJoinedSelectorEmpty=!0,sel.length>0?(newSelectorPath=sel.slice(0),lastSelector=newSelectorPath.pop(),newJoinedSelector=selector.createDerived(lastSelector.elements.slice(0)),newJoinedSelectorEmpty=!1):newJoinedSelector=selector.createDerived([]),parentSel.length>1&&(afterParentJoin=afterParentJoin.concat(parentSel.slice(1))),parentSel.length>0&&(newJoinedSelectorEmpty=!1,newJoinedSelector.elements.push(new tree.Element(el.combinator,parentSel[0].elements[0].value,el.index,el.currentFileInfo)),newJoinedSelector.elements=newJoinedSelector.elements.concat(parentSel[0].elements.slice(1))),newJoinedSelectorEmpty||newSelectorPath.push(newJoinedSelector),newSelectorPath=newSelectorPath.concat(afterParentJoin),selectorsMultiplied.push(newSelectorPath);newSelectors=selectorsMultiplied,currentElements=[]}for(currentElements.length>0&&this.mergeElementsOnToSelectors(currentElements,newSelectors),i=0;i<newSelectors.length;i++)newSelectors[i].length>0&&paths.push(newSelectors[i])}else if(context.length>0)for(i=0;i<context.length;i++)paths.push(context[i].concat(selector));else paths.push([selector])},mergeElementsOnToSelectors:function(elements,selectors){var i,sel;if(0===selectors.length)return void selectors.push([new tree.Selector(elements)]);for(i=0;i<selectors.length;i++)sel=selectors[i],sel.length>0?sel[sel.length-1]=sel[sel.length-1].createDerived(sel[sel.length-1].elements.concat(elements)):sel.push(new tree.Selector(elements))}}}(require("../tree")),function(tree){tree.Selector=function(elements,extendList,condition,index,currentFileInfo,isReferenced){this.elements=elements,this.extendList=extendList,this.condition=condition,this.currentFileInfo=currentFileInfo||{},this.isReferenced=isReferenced,condition||(this.evaldCondition=!0)},tree.Selector.prototype={type:"Selector",accept:function(visitor){this.elements&&(this.elements=visitor.visitArray(this.elements)),this.extendList&&(this.extendList=visitor.visitArray(this.extendList)),this.condition&&(this.condition=visitor.visit(this.condition))},createDerived:function(elements,extendList,evaldCondition){evaldCondition=null!=evaldCondition?evaldCondition:this.evaldCondition;var newSelector=new tree.Selector(elements,extendList||this.extendList,null,this.index,this.currentFileInfo,this.isReferenced);return newSelector.evaldCondition=evaldCondition,newSelector.mediaEmpty=this.mediaEmpty,newSelector},match:function(other){var olen,i,elements=this.elements,len=elements.length;if(other.CacheElements(),olen=other._elements.length,0===olen||olen>len)return 0;for(i=0;olen>i;i++)if(elements[i].value!==other._elements[i])return 0;return olen},CacheElements:function(){var len,v,i,css="";if(!this._elements){for(len=this.elements.length,i=0;len>i;i++)if(v=this.elements[i],css+=v.combinator.value,v.value.value){if("string"!=typeof v.value.value){css="";break}css+=v.value.value}else css+=v.value;this._elements=css.match(/[,&#\.\w-]([\w-]|(\\.))*/g),this._elements?"&"===this._elements[0]&&this._elements.shift():this._elements=[]}},isJustParentSelector:function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},eval:function(env){var evaldCondition=this.condition&&this.condition.eval(env),elements=this.elements,extendList=this.extendList;return elements=elements&&elements.map(function(e){return e.eval(env)}),extendList=extendList&&extendList.map(function(extend){return extend.eval(env)}),this.createDerived(elements,extendList,evaldCondition)},genCSS:function(env,output){var i,element;if(env&&env.firstSelector||""!==this.elements[0].combinator.value||output.add(" ",this.currentFileInfo,this.index),!this._css)for(i=0;i<this.elements.length;i++)element=this.elements[i],element.genCSS(env,output)},toCSS:tree.toCSS,markReferenced:function(){this.isReferenced=!0},getIsReferenced:function(){return!this.currentFileInfo.reference||this.isReferenced},getIsOutput:function(){return this.evaldCondition}}}(require("../tree")),function(tree){tree.UnicodeDescriptor=function(value){this.value=value},tree.UnicodeDescriptor.prototype={type:"UnicodeDescriptor",genCSS:function(env,output){output.add(this.value)},toCSS:tree.toCSS,eval:function(){return this}}}(require("../tree")),function(tree){tree.URL=function(val,currentFileInfo,isEvald){this.value=val,this.currentFileInfo=currentFileInfo,this.isEvald=isEvald},tree.URL.prototype={type:"Url",accept:function(visitor){this.value=visitor.visit(this.value)},genCSS:function(env,output){output.add("url("),this.value.genCSS(env,output),output.add(")")},toCSS:tree.toCSS,eval:function(ctx){var rootpath,val=this.value.eval(ctx);if(!this.isEvald&&(rootpath=this.currentFileInfo&&this.currentFileInfo.rootpath,rootpath&&"string"==typeof val.value&&ctx.isPathRelative(val.value)&&(val.quote||(rootpath=rootpath.replace(/[\(\)'"\s]/g,function(match){return"\\"+match})),val.value=rootpath+val.value),val.value=ctx.normalizePath(val.value),ctx.urlArgs&&!val.value.match(/^\s*data:/))){var delimiter=-1===val.value.indexOf("?")?"?":"&",urlArgs=delimiter+ctx.urlArgs;-1!==val.value.indexOf("#")?val.value=val.value.replace("#",urlArgs+"#"):val.value+=urlArgs}return new tree.URL(val,this.currentFileInfo,!0)}}}(require("../tree")),function(tree){tree.Value=function(value){this.value=value},tree.Value.prototype={type:"Value",accept:function(visitor){this.value&&(this.value=visitor.visitArray(this.value))},eval:function(env){return 1===this.value.length?this.value[0].eval(env):new tree.Value(this.value.map(function(v){return v.eval(env)}))},genCSS:function(env,output){var i;for(i=0;i<this.value.length;i++)this.value[i].genCSS(env,output),i+1<this.value.length&&output.add(env&&env.compress?",":", ")},toCSS:tree.toCSS}}(require("../tree")),function(tree){tree.Variable=function(name,index,currentFileInfo){this.name=name,this.index=index,this.currentFileInfo=currentFileInfo||{}},tree.Variable.prototype={type:"Variable",eval:function(env){var variable,name=this.name;if(0===name.indexOf("@@")&&(name="@"+new tree.Variable(name.slice(1)).eval(env).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+name,filename:this.currentFileInfo.file,index:this.index};if(this.evaluating=!0,variable=tree.find(env.frames,function(frame){var v=frame.variable(name);return v?v.value.eval(env):void 0}))return this.evaluating=!1,variable;throw{type:"Name",message:"variable "+name+" is undefined",filename:this.currentFileInfo.filename,index:this.index}}}}(require("../tree")),function(tree){var parseCopyProperties=["paths","optimization","files","contents","contentsIgnoredChars","relativeUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","processImports","syncImport","javascriptEnabled","mime","useFileCache","currentFileInfo"];tree.parseEnv=function(options){if(copyFromOriginal(options,this,parseCopyProperties),this.contents||(this.contents={}),this.contentsIgnoredChars||(this.contentsIgnoredChars={}),this.files||(this.files={}),"string"==typeof this.paths&&(this.paths=[this.paths]),!this.currentFileInfo){var filename=options&&options.filename||"input",entryPath=filename.replace(/[^\/\\]*$/,"");options&&(options.filename=null),this.currentFileInfo={filename:filename,relativeUrls:this.relativeUrls,rootpath:options&&options.rootpath||"",currentDirectory:entryPath,entryPath:entryPath,rootFilename:filename}}};var evalCopyProperties=["silent","verbose","compress","yuicompress","ieCompat","strictMath","strictUnits","cleancss","sourceMap","importMultiple","urlArgs"];tree.evalEnv=function(options,frames){copyFromOriginal(options,this,evalCopyProperties),this.frames=frames||[]},tree.evalEnv.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},tree.evalEnv.prototype.outOfParenthesis=function(){this.parensStack.pop()},tree.evalEnv.prototype.isMathOn=function(){return this.strictMath?this.parensStack&&this.parensStack.length:!0},tree.evalEnv.prototype.isPathRelative=function(path){return!/^(?:[a-z-]+:|\/)/.test(path)},tree.evalEnv.prototype.normalizePath=function(path){var segment,segments=path.split("/").reverse();for(path=[];0!==segments.length;)switch(segment=segments.pop()){case".":break;case"..":0===path.length||".."===path[path.length-1]?path.push(segment):path.pop();break;default:path.push(segment)}return path.join("/")};var copyFromOriginal=function(original,destination,propertiesToCopy){if(original)for(var i=0;i<propertiesToCopy.length;i++)original.hasOwnProperty(propertiesToCopy[i])&&(destination[propertiesToCopy[i]]=original[propertiesToCopy[i]])}}(require("./tree")),function(tree){function _noop(node){return node}function indexNodeTypes(parent,ticker){var key,child;for(key in parent)if(parent.hasOwnProperty(key))switch(child=parent[key],typeof child){case"function":child.prototype&&child.prototype.type&&(child.prototype.typeIndex=ticker++);break;case"object":ticker=indexNodeTypes(child,ticker)}return ticker}var _visitArgs={visitDeeper:!0},_hasIndexed=!1;tree.visitor=function(implementation){this._implementation=implementation,this._visitFnCache=[],_hasIndexed||(indexNodeTypes(tree,1),_hasIndexed=!0)},tree.visitor.prototype={visit:function(node){if(!node)return node;var nodeTypeIndex=node.typeIndex;if(!nodeTypeIndex)return node;var fnName,visitFnCache=this._visitFnCache,impl=this._implementation,aryIndx=nodeTypeIndex<<1,outAryIndex=1|aryIndx,func=visitFnCache[aryIndx],funcOut=visitFnCache[outAryIndex],visitArgs=_visitArgs;if(visitArgs.visitDeeper=!0,func||(fnName="visit"+node.type,func=impl[fnName]||_noop,funcOut=impl[fnName+"Out"]||_noop,visitFnCache[aryIndx]=func,visitFnCache[outAryIndex]=funcOut),func!==_noop){var newNode=func.call(impl,node,visitArgs);impl.isReplacing&&(node=newNode)}return visitArgs.visitDeeper&&node&&node.accept&&node.accept(this),funcOut!=_noop&&funcOut.call(impl,node),node},visitArray:function(nodes,nonReplacing){if(!nodes)return nodes;var i,cnt=nodes.length;if(nonReplacing||!this._implementation.isReplacing){for(i=0;cnt>i;i++)this.visit(nodes[i]);return nodes}var out=[];for(i=0;cnt>i;i++){var evald=this.visit(nodes[i]);evald.splice?evald.length&&this.flatten(evald,out):out.push(evald)}return out},flatten:function(arr,out){out||(out=[]);var cnt,i,item,nestedCnt,j,nestedItem;for(i=0,cnt=arr.length;cnt>i;i++)if(item=arr[i],item.splice)for(j=0,nestedCnt=item.length;nestedCnt>j;j++)nestedItem=item[j],nestedItem.splice?nestedItem.length&&this.flatten(nestedItem,out):out.push(nestedItem);else out.push(item);return out}}}(require("./tree")),function(tree){tree.importVisitor=function(importer,finish,evalEnv,onceFileDetectionMap,recursionDetector){if(this._visitor=new tree.visitor(this),this._importer=importer,this._finish=finish,this.env=evalEnv||new tree.evalEnv,this.importCount=0,this.onceFileDetectionMap=onceFileDetectionMap||{},this.recursionDetector={},recursionDetector)for(var fullFilename in recursionDetector)recursionDetector.hasOwnProperty(fullFilename)&&(this.recursionDetector[fullFilename]=!0)},tree.importVisitor.prototype={isReplacing:!0,run:function(root){var error;try{this._visitor.visit(root)}catch(e){error=e}this.isFinished=!0,0===this.importCount&&this._finish(error)},visitImport:function(importNode,visitArgs){var evaldImportNode,importVisitor=this,inlineCSS=importNode.options.inline;if(!importNode.css||inlineCSS){try{evaldImportNode=importNode.evalForImport(this.env)}catch(e){e.filename||(e.index=importNode.index,e.filename=importNode.currentFileInfo.filename),importNode.css=!0,importNode.error=e}if(evaldImportNode&&(!evaldImportNode.css||inlineCSS)){importNode=evaldImportNode,this.importCount++;var env=new tree.evalEnv(this.env,this.env.frames.slice(0));importNode.options.multiple&&(env.importMultiple=!0),this._importer.push(importNode.getPath(),importNode.currentFileInfo,importNode.options,function(e,root,importedAtRoot,fullPath){e&&!e.filename&&(e.index=importNode.index,e.filename=importNode.currentFileInfo.filename);var duplicateImport=importedAtRoot||fullPath in importVisitor.recursionDetector;env.importMultiple||(importNode.skip=duplicateImport?!0:function(){return fullPath in importVisitor.onceFileDetectionMap?!0:(importVisitor.onceFileDetectionMap[fullPath]=!0,!1)});var subFinish=function(e){importVisitor.importCount--,0===importVisitor.importCount&&importVisitor.isFinished&&importVisitor._finish(e)};return!root||(importNode.root=root,importNode.importedFilename=fullPath,inlineCSS||!env.importMultiple&&duplicateImport)?void subFinish():(importVisitor.recursionDetector[fullPath]=!0,void new tree.importVisitor(importVisitor._importer,subFinish,env,importVisitor.onceFileDetectionMap,importVisitor.recursionDetector).run(root))})}}return visitArgs.visitDeeper=!1,importNode},visitRule:function(ruleNode,visitArgs){return visitArgs.visitDeeper=!1,ruleNode},visitDirective:function(directiveNode){return this.env.frames.unshift(directiveNode),directiveNode},visitDirectiveOut:function(){this.env.frames.shift()},visitMixinDefinition:function(mixinDefinitionNode){return this.env.frames.unshift(mixinDefinitionNode),mixinDefinitionNode},visitMixinDefinitionOut:function(){this.env.frames.shift()},visitRuleset:function(rulesetNode){return this.env.frames.unshift(rulesetNode),rulesetNode},visitRulesetOut:function(){this.env.frames.shift()},visitMedia:function(mediaNode){return this.env.frames.unshift(mediaNode.ruleset),mediaNode},visitMediaOut:function(){this.env.frames.shift()}}}(require("./tree")),function(tree){tree.joinSelectorVisitor=function(){this.contexts=[[]],this._visitor=new tree.visitor(this)},tree.joinSelectorVisitor.prototype={run:function(root){return this._visitor.visit(root)},visitRule:function(ruleNode,visitArgs){visitArgs.visitDeeper=!1},visitMixinDefinition:function(mixinDefinitionNode,visitArgs){visitArgs.visitDeeper=!1},visitRuleset:function(rulesetNode){var selectors,context=this.contexts[this.contexts.length-1],paths=[];this.contexts.push(paths),rulesetNode.root||(selectors=rulesetNode.selectors,selectors&&(selectors=selectors.filter(function(selector){return selector.getIsOutput()}),rulesetNode.selectors=selectors.length?selectors:selectors=null,selectors&&rulesetNode.joinSelectors(paths,context,selectors)),selectors||(rulesetNode.rules=null),rulesetNode.paths=paths)},visitRulesetOut:function(){this.contexts.length=this.contexts.length-1},visitMedia:function(mediaNode){var context=this.contexts[this.contexts.length-1];mediaNode.rules[0].root=0===context.length||context[0].multiMedia}}}(require("./tree")),function(tree){tree.toCSSVisitor=function(env){this._visitor=new tree.visitor(this),this._env=env},tree.toCSSVisitor.prototype={isReplacing:!0,run:function(root){return this._visitor.visit(root)},visitRule:function(ruleNode){return ruleNode.variable?[]:ruleNode},visitMixinDefinition:function(mixinNode){return mixinNode.frames=[],[]},visitExtend:function(){return[]},visitComment:function(commentNode){return commentNode.isSilent(this._env)?[]:commentNode},visitMedia:function(mediaNode,visitArgs){return mediaNode.accept(this._visitor),visitArgs.visitDeeper=!1,mediaNode.rules.length?mediaNode:[]},visitDirective:function(directiveNode){if(directiveNode.currentFileInfo.reference&&!directiveNode.isReferenced)return[];if("@charset"===directiveNode.name){if(this.charset){if(directiveNode.debugInfo){var comment=new tree.Comment("/* "+directiveNode.toCSS(this._env).replace(/\n/g,"")+" */\n");return comment.debugInfo=directiveNode.debugInfo,this._visitor.visit(comment)}return[]}this.charset=!0}return directiveNode.rules&&directiveNode.rules.rules&&this._mergeRules(directiveNode.rules.rules),directiveNode},checkPropertiesInRoot:function(rules){for(var ruleNode,i=0;i<rules.length;i++)if(ruleNode=rules[i],ruleNode instanceof tree.Rule&&!ruleNode.variable)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:ruleNode.index,filename:ruleNode.currentFileInfo?ruleNode.currentFileInfo.filename:null}},visitRuleset:function(rulesetNode,visitArgs){var rule,rulesets=[];if(rulesetNode.firstRoot&&this.checkPropertiesInRoot(rulesetNode.rules),rulesetNode.root)rulesetNode.accept(this._visitor),visitArgs.visitDeeper=!1,(rulesetNode.firstRoot||rulesetNode.rules&&rulesetNode.rules.length>0)&&rulesets.splice(0,0,rulesetNode);else{rulesetNode.paths&&(rulesetNode.paths=rulesetNode.paths.filter(function(p){var i;for(" "===p[0].elements[0].combinator.value&&(p[0].elements[0].combinator=new tree.Combinator("")),i=0;i<p.length;i++)if(p[i].getIsReferenced()&&p[i].getIsOutput())return!0;return!1}));for(var nodeRules=rulesetNode.rules,nodeRuleCnt=nodeRules?nodeRules.length:0,i=0;nodeRuleCnt>i;)rule=nodeRules[i],rule&&rule.rules?(rulesets.push(this._visitor.visit(rule)),nodeRules.splice(i,1),nodeRuleCnt--):i++;nodeRuleCnt>0?rulesetNode.accept(this._visitor):rulesetNode.rules=null,visitArgs.visitDeeper=!1,nodeRules=rulesetNode.rules,nodeRules&&(this._mergeRules(nodeRules),nodeRules=rulesetNode.rules),nodeRules&&(this._removeDuplicateRules(nodeRules),nodeRules=rulesetNode.rules),nodeRules&&nodeRules.length>0&&rulesetNode.paths.length>0&&rulesets.splice(0,0,rulesetNode)}return 1===rulesets.length?rulesets[0]:rulesets},_removeDuplicateRules:function(rules){if(rules){var ruleList,rule,i,ruleCache={};for(i=rules.length-1;i>=0;i--)if(rule=rules[i],rule instanceof tree.Rule)if(ruleCache[rule.name]){ruleList=ruleCache[rule.name],ruleList instanceof tree.Rule&&(ruleList=ruleCache[rule.name]=[ruleCache[rule.name].toCSS(this._env)]);var ruleCSS=rule.toCSS(this._env);-1!==ruleList.indexOf(ruleCSS)?rules.splice(i,1):ruleList.push(ruleCSS)}else ruleCache[rule.name]=rule}},_mergeRules:function(rules){if(rules){for(var parts,rule,key,groups={},i=0;i<rules.length;i++)rule=rules[i],rule instanceof tree.Rule&&rule.merge&&(key=[rule.name,rule.important?"!":""].join(","),groups[key]?rules.splice(i--,1):groups[key]=[],groups[key].push(rule));Object.keys(groups).map(function(k){function toExpression(values){return new tree.Expression(values.map(function(p){return p.value}))}function toValue(values){return new tree.Value(values.map(function(p){return p}))}if(parts=groups[k],parts.length>1){rule=parts[0];var spacedGroups=[],lastSpacedGroup=[];parts.map(function(p){"+"===p.merge&&(lastSpacedGroup.length>0&&spacedGroups.push(toExpression(lastSpacedGroup)),lastSpacedGroup=[]),lastSpacedGroup.push(p)}),spacedGroups.push(toExpression(lastSpacedGroup)),rule.value=toValue(spacedGroups)}})}}}}(require("./tree")),function(tree){tree.extendFinderVisitor=function(){this._visitor=new tree.visitor(this),this.contexts=[],this.allExtendsStack=[[]]},tree.extendFinderVisitor.prototype={run:function(root){return root=this._visitor.visit(root),root.allExtends=this.allExtendsStack[0],root},visitRule:function(ruleNode,visitArgs){visitArgs.visitDeeper=!1},visitMixinDefinition:function(mixinDefinitionNode,visitArgs){visitArgs.visitDeeper=!1},visitRuleset:function(rulesetNode){if(!rulesetNode.root){var i,j,extend,extendList,allSelectorsExtendList=[],rules=rulesetNode.rules,ruleCnt=rules?rules.length:0;for(i=0;ruleCnt>i;i++)rulesetNode.rules[i]instanceof tree.Extend&&(allSelectorsExtendList.push(rules[i]),rulesetNode.extendOnEveryPath=!0);var paths=rulesetNode.paths;for(i=0;i<paths.length;i++){var selectorPath=paths[i],selector=selectorPath[selectorPath.length-1],selExtendList=selector.extendList;for(extendList=selExtendList?selExtendList.slice(0).concat(allSelectorsExtendList):allSelectorsExtendList,extendList&&(extendList=extendList.map(function(allSelectorsExtend){return allSelectorsExtend.clone()})),j=0;j<extendList.length;j++)this.foundExtends=!0,extend=extendList[j],extend.findSelfSelectors(selectorPath),extend.ruleset=rulesetNode,0===j&&(extend.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(extend)}this.contexts.push(rulesetNode.selectors)}},visitRulesetOut:function(rulesetNode){rulesetNode.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(mediaNode){mediaNode.allExtends=[],this.allExtendsStack.push(mediaNode.allExtends)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(directiveNode){directiveNode.allExtends=[],this.allExtendsStack.push(directiveNode.allExtends)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}},tree.processExtendsVisitor=function(){this._visitor=new tree.visitor(this)},tree.processExtendsVisitor.prototype={run:function(root){var extendFinder=new tree.extendFinderVisitor;return extendFinder.run(root),extendFinder.foundExtends?(root.allExtends=root.allExtends.concat(this.doExtendChaining(root.allExtends,root.allExtends)),this.allExtendsStack=[root.allExtends],this._visitor.visit(root)):root},doExtendChaining:function(extendsList,extendsListTarget,iterationCount){var extendIndex,targetExtendIndex,matches,newSelector,selectorPath,extend,targetExtend,newExtend,extendsToAdd=[],extendVisitor=this;for(iterationCount=iterationCount||0,extendIndex=0;extendIndex<extendsList.length;extendIndex++)for(targetExtendIndex=0;targetExtendIndex<extendsListTarget.length;targetExtendIndex++)extend=extendsList[extendIndex],targetExtend=extendsListTarget[targetExtendIndex],extend.parent_ids.indexOf(targetExtend.object_id)>=0||(selectorPath=[targetExtend.selfSelectors[0]],matches=extendVisitor.findMatch(extend,selectorPath),matches.length&&extend.selfSelectors.forEach(function(selfSelector){newSelector=extendVisitor.extendSelector(matches,selectorPath,selfSelector),newExtend=new tree.Extend(targetExtend.selector,targetExtend.option,0),newExtend.selfSelectors=newSelector,newSelector[newSelector.length-1].extendList=[newExtend],extendsToAdd.push(newExtend),newExtend.ruleset=targetExtend.ruleset,newExtend.parent_ids=newExtend.parent_ids.concat(targetExtend.parent_ids,extend.parent_ids),targetExtend.firstExtendOnThisSelectorPath&&(newExtend.firstExtendOnThisSelectorPath=!0,targetExtend.ruleset.paths.push(newSelector))}));if(extendsToAdd.length){if(this.extendChainCount++,iterationCount>100){var selectorOne="{unable to calculate}",selectorTwo="{unable to calculate}";try{selectorOne=extendsToAdd[0].selfSelectors[0].toCSS(),selectorTwo=extendsToAdd[0].selector.toCSS()}catch(e){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+selectorOne+":extend("+selectorTwo+")"}}return extendsToAdd.concat(extendVisitor.doExtendChaining(extendsToAdd,extendsListTarget,iterationCount+1))}return extendsToAdd},visitRule:function(ruleNode,visitArgs){visitArgs.visitDeeper=!1},visitMixinDefinition:function(mixinDefinitionNode,visitArgs){visitArgs.visitDeeper=!1},visitSelector:function(selectorNode,visitArgs){visitArgs.visitDeeper=!1},visitRuleset:function(rulesetNode){if(!rulesetNode.root){var matches,pathIndex,extendIndex,selectorPath,allExtends=this.allExtendsStack[this.allExtendsStack.length-1],selectorsToAdd=[],extendVisitor=this;for(extendIndex=0;extendIndex<allExtends.length;extendIndex++)for(pathIndex=0;pathIndex<rulesetNode.paths.length;pathIndex++)if(selectorPath=rulesetNode.paths[pathIndex],!rulesetNode.extendOnEveryPath){var extendList=selectorPath[selectorPath.length-1].extendList;extendList&&extendList.length||(matches=this.findMatch(allExtends[extendIndex],selectorPath),matches.length&&allExtends[extendIndex].selfSelectors.forEach(function(selfSelector){selectorsToAdd.push(extendVisitor.extendSelector(matches,selectorPath,selfSelector))}))}rulesetNode.paths=rulesetNode.paths.concat(selectorsToAdd)}},findMatch:function(extend,haystackSelectorPath){var haystackSelectorIndex,hackstackSelector,hackstackElementIndex,haystackElement,targetCombinator,i,potentialMatch,extendVisitor=this,needleElements=extend.selector.elements,potentialMatches=[],matches=[];
for(haystackSelectorIndex=0;haystackSelectorIndex<haystackSelectorPath.length;haystackSelectorIndex++)for(hackstackSelector=haystackSelectorPath[haystackSelectorIndex],hackstackElementIndex=0;hackstackElementIndex<hackstackSelector.elements.length;hackstackElementIndex++)for(haystackElement=hackstackSelector.elements[hackstackElementIndex],(extend.allowBefore||0===haystackSelectorIndex&&0===hackstackElementIndex)&&potentialMatches.push({pathIndex:haystackSelectorIndex,index:hackstackElementIndex,matched:0,initialCombinator:haystackElement.combinator}),i=0;i<potentialMatches.length;i++)potentialMatch=potentialMatches[i],targetCombinator=haystackElement.combinator.value,""===targetCombinator&&0===hackstackElementIndex&&(targetCombinator=" "),!extendVisitor.isElementValuesEqual(needleElements[potentialMatch.matched].value,haystackElement.value)||potentialMatch.matched>0&&needleElements[potentialMatch.matched].combinator.value!==targetCombinator?potentialMatch=null:potentialMatch.matched++,potentialMatch&&(potentialMatch.finished=potentialMatch.matched===needleElements.length,potentialMatch.finished&&!extend.allowAfter&&(hackstackElementIndex+1<hackstackSelector.elements.length||haystackSelectorIndex+1<haystackSelectorPath.length)&&(potentialMatch=null)),potentialMatch?potentialMatch.finished&&(potentialMatch.length=needleElements.length,potentialMatch.endPathIndex=haystackSelectorIndex,potentialMatch.endPathElementIndex=hackstackElementIndex+1,potentialMatches.length=0,matches.push(potentialMatch)):(potentialMatches.splice(i,1),i--);return matches},isElementValuesEqual:function(elementValue1,elementValue2){if("string"==typeof elementValue1||"string"==typeof elementValue2)return elementValue1===elementValue2;if(elementValue1 instanceof tree.Attribute)return elementValue1.op!==elementValue2.op||elementValue1.key!==elementValue2.key?!1:elementValue1.value&&elementValue2.value?(elementValue1=elementValue1.value.value||elementValue1.value,elementValue2=elementValue2.value.value||elementValue2.value,elementValue1===elementValue2):elementValue1.value||elementValue2.value?!1:!0;if(elementValue1=elementValue1.value,elementValue2=elementValue2.value,elementValue1 instanceof tree.Selector){if(!(elementValue2 instanceof tree.Selector)||elementValue1.elements.length!==elementValue2.elements.length)return!1;for(var i=0;i<elementValue1.elements.length;i++){if(elementValue1.elements[i].combinator.value!==elementValue2.elements[i].combinator.value&&(0!==i||(elementValue1.elements[i].combinator.value||" ")!==(elementValue2.elements[i].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(elementValue1.elements[i].value,elementValue2.elements[i].value))return!1}return!0}return!1},extendSelector:function(matches,selectorPath,replacementSelector){var matchIndex,selector,firstElement,match,newElements,currentSelectorPathIndex=0,currentSelectorPathElementIndex=0,path=[];for(matchIndex=0;matchIndex<matches.length;matchIndex++)match=matches[matchIndex],selector=selectorPath[match.pathIndex],firstElement=new tree.Element(match.initialCombinator,replacementSelector.elements[0].value,replacementSelector.elements[0].index,replacementSelector.elements[0].currentFileInfo),match.pathIndex>currentSelectorPathIndex&&currentSelectorPathElementIndex>0&&(path[path.length-1].elements=path[path.length-1].elements.concat(selectorPath[currentSelectorPathIndex].elements.slice(currentSelectorPathElementIndex)),currentSelectorPathElementIndex=0,currentSelectorPathIndex++),newElements=selector.elements.slice(currentSelectorPathElementIndex,match.index).concat([firstElement]).concat(replacementSelector.elements.slice(1)),currentSelectorPathIndex===match.pathIndex&&matchIndex>0?path[path.length-1].elements=path[path.length-1].elements.concat(newElements):(path=path.concat(selectorPath.slice(currentSelectorPathIndex,match.pathIndex)),path.push(new tree.Selector(newElements))),currentSelectorPathIndex=match.endPathIndex,currentSelectorPathElementIndex=match.endPathElementIndex,currentSelectorPathElementIndex>=selectorPath[currentSelectorPathIndex].elements.length&&(currentSelectorPathElementIndex=0,currentSelectorPathIndex++);return currentSelectorPathIndex<selectorPath.length&&currentSelectorPathElementIndex>0&&(path[path.length-1].elements=path[path.length-1].elements.concat(selectorPath[currentSelectorPathIndex].elements.slice(currentSelectorPathElementIndex)),currentSelectorPathIndex++),path=path.concat(selectorPath.slice(currentSelectorPathIndex,selectorPath.length))},visitRulesetOut:function(){},visitMedia:function(mediaNode){var newAllExtends=mediaNode.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);newAllExtends=newAllExtends.concat(this.doExtendChaining(newAllExtends,mediaNode.allExtends)),this.allExtendsStack.push(newAllExtends)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(directiveNode){var newAllExtends=directiveNode.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);newAllExtends=newAllExtends.concat(this.doExtendChaining(newAllExtends,directiveNode.allExtends)),this.allExtendsStack.push(newAllExtends)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}}}(require("./tree")),function(tree){tree.sourceMapOutput=function(options){this._css=[],this._rootNode=options.rootNode,this._writeSourceMap=options.writeSourceMap,this._contentsMap=options.contentsMap,this._contentsIgnoredCharsMap=options.contentsIgnoredCharsMap,this._sourceMapFilename=options.sourceMapFilename,this._outputFilename=options.outputFilename,this._sourceMapURL=options.sourceMapURL,options.sourceMapBasepath&&(this._sourceMapBasepath=options.sourceMapBasepath.replace(/\\/g,"/")),this._sourceMapRootpath=options.sourceMapRootpath,this._outputSourceFiles=options.outputSourceFiles,this._sourceMapGeneratorConstructor=options.sourceMapGenerator||require("source-map").SourceMapGenerator,this._sourceMapRootpath&&"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/"),this._lineNumber=0,this._column=0},tree.sourceMapOutput.prototype.normalizeFilename=function(filename){return filename=filename.replace(/\\/g,"/"),this._sourceMapBasepath&&0===filename.indexOf(this._sourceMapBasepath)&&(filename=filename.substring(this._sourceMapBasepath.length),("\\"===filename.charAt(0)||"/"===filename.charAt(0))&&(filename=filename.substring(1))),(this._sourceMapRootpath||"")+filename},tree.sourceMapOutput.prototype.add=function(chunk,fileInfo,index,mapLines){if(chunk){var lines,sourceLines,columns,sourceColumns,i;if(fileInfo){var inputSource=this._contentsMap[fileInfo.filename];this._contentsIgnoredCharsMap[fileInfo.filename]&&(index-=this._contentsIgnoredCharsMap[fileInfo.filename],0>index&&(index=0),inputSource=inputSource.slice(this._contentsIgnoredCharsMap[fileInfo.filename])),inputSource=inputSource.substring(0,index),sourceLines=inputSource.split("\n"),sourceColumns=sourceLines[sourceLines.length-1]}if(lines=chunk.split("\n"),columns=lines[lines.length-1],fileInfo)if(mapLines)for(i=0;i<lines.length;i++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+i+1,column:0===i?this._column:0},original:{line:sourceLines.length+i,column:0===i?sourceColumns.length:0},source:this.normalizeFilename(fileInfo.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:sourceLines.length,column:sourceColumns.length},source:this.normalizeFilename(fileInfo.filename)});1===lines.length?this._column+=columns.length:(this._lineNumber+=lines.length-1,this._column=columns.length),this._css.push(chunk)}},tree.sourceMapOutput.prototype.isEmpty=function(){return 0===this._css.length},tree.sourceMapOutput.prototype.toCSS=function(env){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var filename in this._contentsMap)if(this._contentsMap.hasOwnProperty(filename)){var source=this._contentsMap[filename];this._contentsIgnoredCharsMap[filename]&&(source=source.slice(this._contentsIgnoredCharsMap[filename])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(filename),source)}if(this._rootNode.genCSS(env,this),this._css.length>0){var sourceMapURL,sourceMapContent=JSON.stringify(this._sourceMapGenerator.toJSON());this._sourceMapURL?sourceMapURL=this._sourceMapURL:this._sourceMapFilename&&(sourceMapURL=this.normalizeFilename(this._sourceMapFilename)),this._writeSourceMap?this._writeSourceMap(sourceMapContent):sourceMapURL="data:application/json;base64,"+require("./encoder.js").encodeBase64(sourceMapContent),sourceMapURL&&this._css.push("/*# sourceMappingURL="+sourceMapURL+" */")}return this._css.join("")}}(require("./tree"));var isFileProtocol=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);less.env=less.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||location.port&&location.port.length>0||isFileProtocol?"development":"production");var logLevel={debug:3,info:2,errors:1,none:0};if(less.logLevel="undefined"!=typeof less.logLevel?less.logLevel:"development"===less.env?logLevel.debug:logLevel.errors,less.async=less.async||!1,less.fileAsync=less.fileAsync||!1,less.poll=less.poll||(isFileProtocol?1e3:1500),less.functions)for(var func in less.functions)less.functions.hasOwnProperty(func)&&(less.tree.functions[func]=less.functions[func]);var dumpLineNumbers=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);dumpLineNumbers&&(less.dumpLineNumbers=dumpLineNumbers[1]);var typePattern=/^text\/(x-)?less$/,cache=null,fileCache={};if(less.watch=function(){return less.watchMode||(less.env="development",initRunningMode()),this.watchMode=!0,!0},less.unwatch=function(){return clearInterval(less.watchTimer),this.watchMode=!1,!1},/!watch/.test(location.hash)&&less.watch(),"development"!=less.env)try{cache="undefined"==typeof window.localStorage?null:window.localStorage}catch(_){}var links=document.getElementsByTagName("link");less.sheets=[];for(var i=0;i<links.length;i++)("stylesheet/less"===links[i].rel||links[i].rel.match(/stylesheet/)&&links[i].type.match(typePattern))&&less.sheets.push(links[i]);less.modifyVars=function(record){less.refresh(!1,record)},less.refresh=function(reload,modifyVars){var startTime,endTime;startTime=endTime=new Date,loadStyleSheets(function(e,root,_,sheet,env){if(e)return error(e,sheet.href);if(env.local)log("loading "+sheet.href+" from cache.",logLevel.info);else{log("parsed "+sheet.href+" successfully.",logLevel.debug);var styles=root.toCSS(less);styles=postProcessCSS(styles),createCSS(styles,sheet,env.lastModified)}log("css for "+sheet.href+" generated in "+(new Date-endTime)+"ms",logLevel.info),0===env.remaining&&log("less has finished. css generated in "+(new Date-startTime)+"ms",logLevel.info),endTime=new Date},reload,modifyVars),loadStyles(modifyVars)},less.refreshStyles=loadStyles,less.Parser.fileLoader=loadFile,less.refresh("development"===less.env),"function"==typeof define&&define.amd&&define([],function(){return less})}(window);